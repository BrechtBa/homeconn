(this["webpackJsonphomecon-react"]=this["webpackJsonphomecon-react"]||[]).push([[0],{131:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n(0),c=n.n(i),l=n(12),r=n.n(l),s=(n(131),n(67)),o=n(108),d=n(106),u=n(13),j=n(109),f=n(87),p=n(88),b=n(105),x=n(211),h=n(35),v=n(19),O=n(188),g=n(221),m=n(215),y=n(30),w=n(208),k=n(207),C=n(196),S=n(83),_=n(141),N=n(214),D=n(107),T=n(219),I=n(102),W=n.n(I),M=n(80),J=n.n(M),R=n(191);var U=function(e){var t="/icons/".concat(e.color||"#fff","/").concat(e.name||"blank",".png");return void 0!==e.name?Object(a.jsx)("img",{src:t,style:{height:"100%"}}):null},B=Object(O.a)((function(e){return Object(g.a)({group:{display:"block",cursor:"pointer",minHeight:"16px",padding:"12px 12px 12px 40px",backgroundColor:e.palette.secondary.main,borderTop:"solid 1px "+e.palette.secondary.dark,fontSize:"16px",fontWeight:700,textDecoration:"none",color:e.palette.secondary.contrastText,"&:hover":{backgroundColor:e.palette.secondary.light}},page:{display:"flex",position:"relative",cursor:"pointer",height:"60px",borderBottom:"solid 1px "+e.palette.primary.main,fontSize:"18px",fontWeight:700,textDecoration:"none",color:e.palette.primary.contrastText,"&:hover":{backgroundColor:e.palette.primary.light},alignItems:"center"},pageIcon:{width:"59px",height:"59px"},pageTitle:{marginLeft:"40px"}})}));function E(e){var t=B(),n=e.pages,i=e.closeMenu,c=n.map((function(e){return Object(a.jsx)(P,{title:e.config.title,path:e.path,icon:e.config.icon,closeMenu:i},e.path)}));return Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:t.group,onClick:e.handleClick,children:e.title}),Object(a.jsx)(R.a,{in:e.collapsed,children:c})]})}function P(e){var t=B(),n="/pages".concat(e.path),i=e.closeMenu;return Object(a.jsx)("div",{children:Object(a.jsxs)(h.b,{to:n,className:t.page,onClick:function(e){return void 0!==i?i():null},children:[Object(a.jsx)("div",{className:t.pageIcon,children:Object(a.jsx)(U,{name:e.icon,color:"ffffff"})}),Object(a.jsx)("div",{className:t.pageTitle,children:e.title})]})})}var z=function(e){var t=Object(i.useState)(null),n=Object(u.a)(t,2),c=n[0],l=n[1],r=e.closeMenu,s=function(e){return function(t){l(e.path)}};return void 0!==e.groups?e.groups.filter((function(e){return"/home"!==e.path})).map((function(e){return Object(a.jsx)(E,{title:e.config.title,path:e.path,pages:e.pages,handleClick:s(e),collapsed:c===e.path,closeMenu:r},e.path)})):""},F=n(112),H=Object(O.a)((function(e){return Object(g.a)({pageHeader:{display:"flex",marginBottom:"20px"},pageIcon:{height:"60px"},pageTitle:{flexGrow:1,alignSelf:"center",margin:"5px 5px 5px 20px",fontSize:"26px",fontWeight:700},pageHeaderWidget:{},pageSection:{width:"100%",marginBottom:"25px",padding:"10px",position:"relative"},underlined:{borderBottom:"1px solid "+e.palette.primary.main}})}));function L(e){var t=e.title,n=e.icon,i=e.widget,c=H();return Object(a.jsxs)("div",{className:c.pageHeader,children:[Object(a.jsx)("div",{className:c.pageIcon,children:Object(a.jsx)(U,{name:n,color:"ffffff"})}),Object(a.jsx)("div",{className:c.pageTitle,children:t}),Object(a.jsx)("div",{className:c.pageWidget,children:i})]})}function A(e){var t=e.title,n=e.type,i=e.children,c=H();return"raised"===n?Object(a.jsxs)(F.a,{className:c.pageSection,children:[Object(a.jsx)("div",{style:{position:"absolute",top:"-12px",left:"5px"},children:t}),Object(a.jsx)("div",{children:i})]}):"underlined"===n?Object(a.jsx)("div",{className:"".concat(c.pageSection," ").concat(c.underlined),children:i}):Object(a.jsx)("div",{className:c.pageSection,children:i})}var G=n(110),Z=n(223),$=n(193),q=n(213),Q=n(218),V=n(225),K=n(75),X=n.n(K),Y=n(62),ee=n.n(Y),te=n(194),ne=n(195),ae=n(104),ie=n(22),ce=n(212);Object(O.a)((function(e){return Object(g.a)({pageHeader:{}})}));function le(e){var t=e.value,n=e.valueThreshold,i=e.icon,c=e.colorOn,l=e.colorOff,r=t>n?c:l;return Object(a.jsx)(U,{color:r,name:i})}function re(e){var t=e.value,n=e.precision,i=e.prefix,c=e.suffix,l=t;return"number"==typeof t&&(l=parseFloat(t).toFixed(n)),Object(a.jsxs)("div",{style:{display:"inline-block"},children:[Object(a.jsx)("span",{style:{marginRight:"5px"},children:i}),Object(a.jsx)("span",{style:{fontSize:"16px",fontWeight:700},children:l}),Object(a.jsx)("span",{style:{marginLeft:"5px"},children:c})]})}function se(e){var t=e.value,n=e.valueMin,i=e.valueMax,c=e.onChange;return Object(a.jsx)(Z.a,{value:function(e){return(e-n)/(i-n)*100}(t),min:0,max:100,step:1,onChange:function(e,t){return c(e,function(e){return n+e*(i-n)/100}(t))}})}function oe(e){var t=e.alarm,n=e.actions,l=e.onChange,r=e.onDelete,s=Object(i.useState)(!1),o=Object(u.a)(s,2),d=o[0],j=o[1],f=c.a.useState(new Date("1970-01-01T00:00:00")),p=Object(u.a)(f,2),b=p[0],x=p[1],h=Object(i.useState)(!1),v=Object(u.a)(h,2),O=v[0],g=v[1],m=c.a.useState(JSON.parse("[".concat(t.value.trigger.day_of_week,"]"))),y=Object(u.a)(m,2),w=y[0],k=y[1],C={id:"no_action",label:"No action"};n.forEach((function(e){t.value.action===e.id&&(C=e)}));var S=function(e){var t="00",n="00";return void 0!==e&&null!==e.hour&&(t=String(e.hour),e.hour<10&&(t="0"+t)),void 0!==e&&null!==e.minute&&(n=String(e.minute),e.minute<10&&(n="0"+n)),t+":"+n}(t.value.trigger),_=function(e,n){var a=JSON.parse(JSON.stringify(w)),i=a.indexOf(n.index);i>-1?a.splice(i,1):(a.push(n.index),a=a.sort()),k(a);var c=JSON.parse(JSON.stringify(t)),r=JSON.stringify(a);c.value.trigger.day_of_week=r.substring(1,r.length-1),l(c)},N=function(e){return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(a.jsx)("div",{children:e.label}),Object(a.jsx)(V.a,{checked:w.indexOf(e.index)>-1,onChange:function(t){return _(0,e)}})]},e.index)},D=Object(G.a)();return Object(a.jsxs)("div",{style:{border:"solid 1px",borderColor:D.palette.primary.light,borderRadius:"5px",padding:"10px",position:"relative"},children:[Object(a.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)("div",{style:{fontSize:"45px",marginRight:"20px",marginBottom:"5px",cursor:"pointer"},onClick:function(){var e=new Date("1970-01-01T".concat(S,":00"));x(e),j(!0)},children:S}),Object(a.jsxs)(te.a,{onClose:function(e){j(!1)},open:d,children:[Object(a.jsx)(ie.a,{utils:ae.a,children:Object(a.jsx)(ce.a,{margin:"normal",id:"time-picker",label:"Time",value:b,onChange:function(e){x(e)},ampm:!1,variant:"static"})}),Object(a.jsx)(ne.a,{variant:"contained",onClick:function(){return j(!1)},children:"cancel"}),Object(a.jsx)(ne.a,{variant:"contained",color:"primary",onClick:function(e){j(!1);var n=JSON.parse(JSON.stringify(t));n.value.trigger.hour=b.getHours(),n.value.trigger.minute=b.getMinutes(),l(n)},children:"save"})]}),Object(a.jsxs)("div",{style:{display:"flex",flexFlow:"row wrap",width:"100%"},children:[Object(a.jsx)("div",{style:{display:"flex",flexFlow:"row wrap"},children:[{index:0,day:"mon",label:"Mon"},{index:1,day:"tue",label:"Tue"},{index:2,day:"wed",label:"Wed"},{index:3,day:"thu",label:"Thu"},{index:4,day:"fri",label:"Fri"}].map((function(e){return N(e)}))}),Object(a.jsx)("div",{style:{display:"flex",flexFlow:"row wrap"},children:[{index:5,day:"sat",label:"Sat"},{index:6,day:"sun",label:"Sun"}].map((function(e){return N(e)}))})]})]}),Object(a.jsx)($.a,{color:"primary","aria-label":"delete",onClick:function(e){return g(!0)},children:Object(a.jsx)(ee.a,{})}),Object(a.jsxs)(te.a,{onClose:function(){g(!1)},open:O,children:[Object(a.jsx)("h3",{children:"Delete alarm?"}),Object(a.jsx)(ne.a,{variant:"contained",onClick:function(){return g(!1)},children:"cancel"}),Object(a.jsx)(ne.a,{variant:"contained",color:"primary",onClick:function(e){r(t)},children:"Delete"})]})]}),Object(a.jsxs)("div",{style:{width:"100%",marginTop:"5px"},children:[Object(a.jsx)(Q.a,{id:"action-select-label",children:"Action"}),Object(a.jsx)(q.a,{style:{width:"80%"},labelId:"action-select-label",id:"demo-simple-select-helper",value:C.id,onChange:function(e){var n=JSON.parse(JSON.stringify(t));n.value.action=e.target.value,l(n)},children:n.map((function(e){return Object(a.jsx)(T.a,{value:e.id,children:e.label},e.id)}))})]})]})}var de=Object(O.a)((function(e){return Object(g.a)({root:{display:"flex",justifyContent:"flex-start",alignItems:"center",cursor:"pointer"},label:{fontSize:"16px",fontWeight:700},icon:{width:"60px",height:"60px"}})}));function ue(e){var t=e.config,n=t.state,i=t.icon||"light_light",c=t.colorOn||"f79a1f",l=t.colorOff||"ffffff",r=t.valueOn||1,s=t.valueOff||0,o=.5*r+.5*s,d=e.states,u=e.ws,j=void 0;null!==d&&(j=d[n]),void 0===j&&(j={value:0,label:""});var f=t.label||j.label,p=de();return Object(a.jsxs)("div",{className:p.root,onClick:function(e){u.send({event:"state_value",data:{id:j.id,value:j.value>o?s:r}})},children:[Object(a.jsx)("div",{className:p.icon,children:Object(a.jsx)(le,{value:j.value,valueThreshold:o,icon:i,colorOn:c,colorOff:l})}),Object(a.jsx)("div",{className:p.label,children:f})]})}function je(e){var t=e.config,n=t.state,i=t.values||[{value:0,icon:"vent_ventilation_level_0"},{value:1,icon:"vent_ventilation_level_1"},{value:2,icon:"vent_ventilation_level_2"},{value:3,icon:"vent_ventilation_level_3"}],c=t.threshold||.1,l=t.colorOn||"f79a1f",r=t.colorOff||"ffffff",s=e.states,o=e.ws,d=void 0;null!==s&&(d=s[n]),void 0===d&&(d={value:0,label:""});var u=t.label||d.label,j=function(e,t){return Math.abs(e-t)<c?1:0},f=de();return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)("div",{className:f.label,children:u}),Object(a.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:i.map((function(e,t){return Object(a.jsx)("div",{className:f.icon,style:{cursor:"pointer"},onClick:(n=e.value,function(e){console.log({id:d.id,value:n}),o.send({event:"state_value",data:{id:d.id,value:n}})}),children:Object(a.jsx)(le,{value:j(d.value,e.value),valueThreshold:.5,icon:e.icon,colorOn:l,colorOff:r})},t);var n}))})]})}var fe=Object(O.a)((function(e){return Object(g.a)({root:{display:"flex",justifyContent:"flex-start",alignItems:"center"},icon:{width:"60px",height:"60px",cursor:"pointer"},rest:{display:"flex",flexDirection:"column",flexGrow:1},slider:{marginLeft:"15px",marginRight:"15px"},label:{fontSize:"16px",fontWeight:700}})}));function pe(e){var t=e.config,n=t.state,i=t.icon||"light_light",c=t.colorOn||"f79a1f",l=t.colorOff||"ffffff",r=t.valueOn||1,s=t.valueOff||0,o=.01*r+.99*s,d=e.states,u=e.ws,j=void 0;null!==d&&(j=d[n]),void 0===j&&(j={value:0,label:""});var f=t.label||j.label,p=fe(),b=function(e){u.send({event:"state_value",data:{id:j.id,value:e}})};return Object(a.jsxs)("div",{className:p.root,children:[Object(a.jsx)("div",{className:p.icon,onClick:function(e){b(j.value>o?s:r)},children:Object(a.jsx)(le,{value:j.value,valueThreshold:o,icon:i,colorOn:c,colorOff:l})}),Object(a.jsxs)("div",{className:p.rest,children:[Object(a.jsx)("div",{className:p.label,children:f}),Object(a.jsx)("div",{className:p.slider,children:Object(a.jsx)(se,{value:j.value,valueMin:s,valueMax:r,onChange:function(e,t){b(t)}})})]})]})}function be(e){var t=e.config,n=t.state,i=t.precision||0,c=t.prefix||"",l=t.suffix||"",r=e.states,s=void 0;return null!==r&&(s=r[n]),void 0===s&&(s={value:0}),Object(a.jsx)(re,{value:s.value,precision:i,prefix:c,suffix:l})}var xe=Object(O.a)((function(e){return Object(g.a)({root:{display:"flex",justifyContent:"flex-start",alignItems:"center"},iconLeft:{width:"60px",height:"60px",cursor:"pointer",display:"flex",justifyContent:"flex-start",alignItems:"center"},iconRight:{width:"60px",height:"60px",cursor:"pointer",display:"flex",justifyContent:"flex-end",alignItems:"center"},rest:{display:"flex",flexDirection:"column",flexGrow:1},slider:{marginLeft:"15px",marginRight:"15px"},label:{fontSize:"16px",fontWeight:700}})}));function he(e){var t=e.config,n=t.state,i=t.iconOpen||"fts_shutter_10",c=t.iconClosed||"fts_shutter_100",l=t.positionOpen||0,r=t.positionClosed||1,s=e.states,o=e.ws,d=void 0;null!==s&&(d=s[n]),void 0===d&&(d={value:0,label:""});var u=t.label||d.label,j=xe(),f=function(e){o.send({event:"state_value",data:{id:d.id,value:e}})};return Object(a.jsxs)("div",{className:j.root,children:[Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:j.iconLeft,onClick:function(e){f(l)},children:Object(a.jsx)(U,{color:"ffffff",name:i})})}),Object(a.jsxs)("div",{className:j.rest,children:[Object(a.jsx)("div",{className:j.label,children:u}),Object(a.jsx)("div",{className:j.slider,children:Object(a.jsx)(se,{value:d.value,valueMin:l,valueMax:r,onChange:function(e,t){f(t)}})})]}),Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:j.iconRight,onClick:function(e){f(r)},children:Object(a.jsx)(U,{color:"ffffff",name:c})})})]})}var ve=n(64),Oe=n.n(ve),ge=Object(O.a)((function(e){return Object(g.a)({root:{position:"relative",marginTop:"10px",minHeight:"50px",paddingBottom:"30px"},label:{fontSize:"16px",fontWeight:700},icon:{width:"60px",height:"60px"}})}));function me(e){var t=ge(),n=e.config,i=n.state,c=e.states,l=e.ws;if(null===c)return null;var r=c[i];if(void 0===r)return null;var s=n.label||r.label,o=[],d=[];Object.values(c).forEach((function(e){e.parent===r.id&&("alarm"===e.type&&o.push(e),"action"===e.type&&d.push(e))}));var u=function(e){l.send({event:"state_value",data:{id:e.id,value:e.value}})},j=function(e){l.send({event:"delete_schedule",data:{id:e.id}})};return Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)("div",{children:s||r.label}),Object(a.jsx)("div",{children:o.map((function(e){return Object(a.jsx)("div",{style:{marginBottom:"5px"},children:Object(a.jsx)(oe,{alarm:e,actions:d,onChange:u,onDelete:j})},e.id)}))}),Object(a.jsx)($.a,{style:{position:"absolute",bottom:"-10px",right:"10px"},color:"primary","aria-label":"delete",onClick:function(e){l.send({event:"add_schedule",data:{id:r.id}})},children:Object(a.jsx)(Oe.a,{})})]})}function ye(e){var t=e.config,n=Object(i.useState)(new Date),c=Object(u.a)(n,2),l=c[0],r=c[1];Object(i.useEffect)((function(){var e=setInterval((function(){return r(new Date)}),1e3);return function(){clearInterval(e)}}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",fontSize:"6em",fontWeight:700},children:function(e){var t=e.getHours();t=t<10?"0".concat(t):"".concat(t);var n=e.getMinutes();return n=n<10?"0".concat(n):"".concat(n),"".concat(t,":").concat(n)}(l)}),Object(a.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",fontSize:"1.2em"},children:function(e){var n=t.locale||"nl-BE",a=t.dateOptions||{weekday:"long",year:"numeric",month:"long",day:"numeric"};return e.toLocaleDateString(n,a)}(l)})]})}function we(e){var t=e.config,n=e.states,i=void 0;if(null!==n){var c="";t.daily?c="/weather/forecast/daily/".concat(t.timeoffset):t.hourly&&(c="/weather/forecast/hourly/".concat(t.timeoffset));for(var l=0,r=Object.values(n);l<r.length;l++){var s=r[l];if(s.path===c){i=s;break}}}void 0===i&&(i={value:{}});return Object(a.jsxs)("div",{children:[Object(a.jsx)("img",{src:function(e){return void 0!==e.icon&&null!==e.icon?"/weather/".concat(e.icon,".png"):"/weather/blank.png"}(i.value),style:{width:"100%"},alt:"weather forecast"}),Object(a.jsx)("div",{style:{textAlign:"center"},children:function(e){if(void 0!==e.timestamp&&null!==e.timestamp){var n=new Date(1e3*e.timestamp),a=t.locale||"nl-BE",i=t.dateOptions||{weekday:"long"};return n.toLocaleDateString(a,i)}return""}(i.value)}),Object(a.jsx)("div",{style:{textAlign:"center"},children:function(e){return void 0!==e.temperature_max&&null!==e.temperature_max?"".concat(e.temperature_max.toFixed(1)," \xb0C"):""}(i.value)}),Object(a.jsxs)("div",{style:{textAlign:"center"},children:[function(e){return void 0!==e.wind_speed&&null!==e.wind_speed?"".concat((3.6*e.wind_speed).toFixed(0)," km/h"):""}(i.value)," ",function(e){return void 0!==e.wind_direction&&null!==e.wind_direction?["N","NO","O","ZO","Z","ZW","W","NW","N"][Math.round(e.wind_direction/360*8)]:""}(i.value)]}),Object(a.jsx)("div",{style:{textAlign:"center"},children:function(e){return void 0!==e.rain&&null!==e.rain?"Regen: ".concat(e.rain.toFixed(0)," mm"):""}(i.value)})]})}function ke(e){var t=e.states;return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginLeft:"-20px",marginRight:"-20px"},children:[Object(a.jsx)(we,{config:{daily:!0,timeoffset:0},states:t,style:{width:"60px",flexGrow:1}}),Object(a.jsx)(we,{config:{daily:!0,timeoffset:1},states:t,style:{width:"60px",flexGrow:1}}),Object(a.jsx)(we,{config:{daily:!0,timeoffset:2},states:t,style:{width:"60px",flexGrow:1}}),Object(a.jsx)(we,{config:{daily:!0,timeoffset:3},states:t,style:{width:"60px",flexGrow:1}})]})}var Ce=Object(O.a)((function(e){return Object(g.a)({root:{display:"flex",justifyContent:"flex-start",alignItems:"center",cursor:"pointer"},icon:{width:"40px",height:"40px"}})}));function Se(e){var t=e.config,n=t.event,i=t.data,c=t.label,l=t.state,r=t.icon||"light_light",s=t.colorOn||"f79a1f",o=t.colorOff||"ffffff",d=.5*(t.valueOn||1)+.5*(t.valueOff||0),u=e.states,j=e.ws,f=void 0;null!==u&&(f=u[l]);var p=Ce();return Object(a.jsxs)(ne.a,{className:p.root,onClick:function(){j.send({event:n,data:i})},children:[void 0!==f&&Object(a.jsx)("div",{className:p.icon,children:Object(a.jsx)(le,{value:f.value,valueThreshold:d,icon:r,colorOn:s,colorOff:o})}),c]})}function _e(e){var t=e.config;return Se({config:{event:"state_value",data:{id:t.state,value:t.value},label:t.label,state:t.statusState,icon:t.icon,colorOn:t.colorOn,colorOff:t.colorOff,valueOn:t.valueOn,valueOff:t.valueOff},states:e.states,ws:e.ws})}var Ne=Object(O.a)((function(e){return Object(g.a)({pageHeader:{display:"flex",marginBottom:"20px"},pageIcon:{height:"60px"},pageTitle:{flexGrow:1,alignSelf:"center",margin:"5px 5px 5px 20px",fontSize:"26px",fontWeight:700},pageHeaderWidget:{},pageSection:{width:"100%",marginBottom:"25px",padding:"10px",position:"relative"},underlined:{borderBottom:"1px solid "+e.palette.primary.main}})})),De=function(e,t,n){var a=null;return void 0!==t&&void 0!==n&&void 0!==e.groups&&e.groups.some((function(e){return e.name===t&&(e.pages.some((function(e){return e.name===n&&(a=e,!0)})),!0)})),a};function Te(e){var t=e.pagesData,n=e.states,i=e.ws,c=Object(v.f)(),l=c.group,r=c.page,s=De(t,l,r);return null!==s?Object(a.jsx)(Ie,{page:s,states:n,ws:i}):null}function Ie(e){var t=e.page,n=e.states,i=e.ws,c=!0,l=Ne(),r="";return null!==t&&void 0!==t.config.widget&&(r=Object(a.jsx)(We,{type:t.config.widget.type,config:t.config.widget.config,states:n,ws:i},t.config.widget.path)),null!==t&&void 0!==t.config.show_header&&(c=t.config.show_header),null!==t?Object(a.jsxs)("div",{children:[c&&Object(a.jsx)(L,{icon:t.config.icon,title:t.config.title,widget:r}),Object(a.jsx)("div",{className:l.pageContent,children:t.sections.map((function(e){return Object(a.jsx)(A,{title:e.config.title,type:e.config.type,children:e.widgets.map((function(e){return Object(a.jsx)(We,{type:e.type,config:e.config,states:n,ws:i},e.path)}))},e.path)}))})]}):""}function We(e){var t=e.type,n=e.config,i=e.states,c=e.ws;return"switch"===t?Object(a.jsx)(ue,{config:n,states:i,ws:c}):"dimmer"===t?Object(a.jsx)(pe,{config:n,states:i,ws:c}):"shading"===t?Object(a.jsx)(he,{config:n,states:i,ws:c}):"value-display"===t?Object(a.jsx)(be,{config:n,states:i}):"alarm"===t?Object(a.jsx)(me,{config:n,states:i,ws:c}):"clock"===t?Object(a.jsx)(ye,{config:n}):"weather-block"===t?Object(a.jsx)(we,{config:n,states:i}):"weather-forecast-summary"===t?Object(a.jsx)(ke,{config:n,states:i}):"button"===t?Object(a.jsx)(Se,{config:n,states:i,ws:c}):"state-value-button"===t?Object(a.jsx)(_e,{config:n,states:i,ws:c}):"multi-switch"===t?Object(a.jsx)(je,{config:n,states:i,ws:c}):Object(a.jsxs)("div",{children:[t," ",JSON.stringify(n)]})}var Me=n(58),Je=n.n(Me),Re=n(78),Ue=n(216),Be=n(205),Ee=n(206),Pe=n(200),ze=n(204),Fe=n(203),He=n(199),Le=n(201),Ae=n(202),Ge=Object(O.a)((function(e){return Object(g.a)({tableRow:{borderColor:"#ff0000"}})}));function Ze(e){var t=e.state,n=e.parentState||null,c=e.states;console.log(n);var l=e.onCancel,r=e.onSave,s=Object(i.useState)(""),o=Object(u.a)(s,2),d=o[0],j=o[1],f=Object(i.useState)(null),p=Object(u.a)(f,2),b=p[0],x=p[1],h=Object(i.useState)(""),v=Object(u.a)(h,2),O=v[0],g=v[1],m=Object(i.useState)(""),y=Object(u.a)(m,2),w=y[0],k=y[1],C=Object(i.useState)(""),S=Object(u.a)(C,2),_=S[0],N=S[1],D=Object(i.useState)(""),I=Object(u.a)(D,2),W=I[0],M=I[1],J=Object(i.useState)(""),R=Object(u.a)(J,2),U=R[0],B=R[1],E=Object(i.useState)("{}"),P=Object(u.a)(E,2),z=P[0],F=P[1],H=Object(i.useState)(""),L=Object(u.a)(H,2),A=L[0],G=L[1];Object(i.useEffect)((function(){null!==t?(j(t.name||""),x(t.parent||null),g(t.type||""),k(t.quantity||""),N(t.unit||""),M(t.label||""),B(t.description||""),F(null!==t.config?JSON.stringify(t.config,void 0,2):"{}"),G(null!==t.value?JSON.stringify(t.value):"")):null!==n&&x(n.id)}),[t,n]);return Object(a.jsx)("div",{children:Object(a.jsxs)("form",{children:[Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(Ue.a,{label:"Name",value:d,onChange:function(e){return j(e.target.value)}}),Object(a.jsx)(Q.a,{id:"Parent-select-label",children:"Parent"}),Object(a.jsxs)(q.a,{style:{width:"80%"},labelId:"action-select-label",id:"demo-simple-select-helper",value:b,onChange:function(e){return x(e.target.value)},children:[Object(a.jsx)(T.a,{value:null,children:"/"}),c.map((function(e){return Object(a.jsx)(T.a,{value:e.id,children:e.path},e.id)}))]}),Object(a.jsx)(Ue.a,{label:"Type",value:O,onChange:function(e){return g(e.target.value)}}),Object(a.jsx)(Ue.a,{label:"Quantity",value:w,onChange:function(e){return k(e.target.value)}}),Object(a.jsx)(Ue.a,{label:"Unit",value:_,onChange:function(e){return N(e.target.value)}}),Object(a.jsx)(Ue.a,{label:"Label",value:W,onChange:function(e){return M(e.target.value)}}),Object(a.jsx)(Ue.a,{label:"Description",value:U,onChange:function(e){return B(e.target.value)}}),Object(a.jsx)(Ue.a,{label:"Config",value:z,onChange:function(e){return F(e.target.value)},multiline:!0}),Object(a.jsx)(Ue.a,{label:"Value",value:A,onChange:function(e){return G(e.target.value)}})]}),Object(a.jsxs)("div",{style:{marginTop:"10px"},children:[Object(a.jsx)(ne.a,{onClick:function(e){return function(){var e=null;if("int"===O)e=parseInt(A),isNaN(e)&&(e=null);else if("float"===O)e=parseFloat(A),isNaN(e)&&(e=null);else if("bool"===O)e=parseInt(A),isNaN(e)?e=null:e>1?e=1:e<0&&(e=0);else if("str"===O)e=A;else try{e=JSON.parse(A)}catch(a){e=A}var n={};null!==t&&(n.id=t.id),n.name=d,n.parent=b,n.type=""===O?null:O,n.quantity=w,n.label=W,n.description=U,n.config=JSON.parse(z),n.value=e,r(n)}()},children:"Save"}),Object(a.jsx)(ne.a,{onClick:function(e){return l()},children:"Cancel"})]})]})})}function $e(e){var t=e.states,n=e.updateState,l=e.addState,r=Object(i.useState)(!1),s=Object(u.a)(r,2),o=s[0],d=s[1],j=Object(i.useState)(null),f=Object(u.a)(j,2),p=f[0],b=f[1],x=Object(i.useState)(null),h=Object(u.a)(x,2),v=h[0],O=h[1],g=c.a.useState(null),m=Object(u.a)(g,2),y=m[0],w=m[1],k=function(){w(null)},C=Ge(),S=function(e){return null===e?[]:Object.values(e).map((function(e){return e}))};return Object(a.jsxs)("div",{children:[Object(a.jsx)(He.a,{children:Object(a.jsxs)(Pe.a,{children:[Object(a.jsx)(Le.a,{children:Object(a.jsxs)(Ae.a,{children:[Object(a.jsx)(Fe.a,{children:"Path"}),Object(a.jsx)(Fe.a,{children:"Type"}),Object(a.jsx)(Fe.a,{align:"right",children:"Actions"})]})}),Object(a.jsx)(ze.a,{children:S(t).map((function(e){return Object(a.jsxs)(Ae.a,{children:[Object(a.jsx)(Fe.a,{component:"th",scope:"row",classes:C.tableCell,children:e.path}),Object(a.jsx)(Fe.a,{classes:C.tableCell,children:e.type}),Object(a.jsx)(Fe.a,{align:"right",classes:C.tableCell,children:Object(a.jsx)(_.a,{"aria-label":"more",color:"inherit",size:"small",onClick:function(t){return function(e,t){b(t),w(e.currentTarget)}(t,e)},children:Object(a.jsx)(J.a,{})})})]},e.id)}))})]})}),Object(a.jsxs)(D.a,{anchorEl:y,keepMounted:!0,open:Boolean(y),onClose:k,children:[Object(a.jsxs)(T.a,{onClick:function(){k(),d(!0)},children:[Object(a.jsx)(Be.a,{style:{color:"#ffffff"},children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(Ee.a,{primary:"Edit"})]}),Object(a.jsxs)(T.a,{onClick:function(){k(),O(p),b(null),d(!0)},children:[Object(a.jsx)(Be.a,{style:{color:"#ffffff"},children:Object(a.jsx)(Oe.a,{})}),Object(a.jsx)(Ee.a,{primary:"Add Child"})]}),Object(a.jsxs)(T.a,{onClick:k,children:[Object(a.jsx)(Be.a,{style:{color:"#ffffff"},children:Object(a.jsx)(ee.a,{})}),Object(a.jsx)(Ee.a,{primary:"Delete"})]})]}),Object(a.jsx)(te.a,{open:o,onClose:function(e){return d(!1)},fullWidth:!0,maxWidth:"sm",children:Object(a.jsx)("div",{style:{padding:"10px"},children:Object(a.jsx)(Ze,{state:p,parentState:v,states:S(t),onCancel:function(e){return d(!1)},onSave:function(e){d(!1),void 0===e.id?l(e):n(e)}})})}),Object(a.jsx)($.a,{color:"primary","aria-label":"add",style:{float:"right",marginRight:"20px",marginTop:"-5px"},onClick:function(){b(null),d(!0)},children:Object(a.jsx)(Oe.a,{})})]})}var qe=function(e){var t=e.states,n=e.ws,c=Object(i.useRef)(null),l=function(){var e=Object(Re.a)(Je.a.mark((function e(t){var a,i;return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.target.files[0],(i=new FileReader).readAsText(a,"UTF-8"),i.onload=function(e){n.send({event:"states_import",data:{value:e.target.result}})},i.onerror=function(e){console.error("error reading file")}}catch(c){console.error(c)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(L,{icon:"message_ok",title:"States"}),Object(a.jsxs)(A,{type:"raised",children:[Object(a.jsx)(ne.a,{onClick:function(e){n.listen_for_response("states_export",{},(function(e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e.data.value)),t.setAttribute("download","states.json"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}))},children:"Export states"}),Object(a.jsx)(ne.a,{onClick:function(e){c.current.click()},children:"Import states"}),Object(a.jsx)("input",{type:"file",id:"file",ref:c,accept:"*.json",style:{display:"none"},onChange:l})]}),Object(a.jsx)(A,{type:"raised",children:Object(a.jsx)($e,{states:t,updateState:function(e){return n.send({event:"state_update",data:e})},addState:function(e){return n.send({event:"state_add",data:e})}})})]})};var Qe=function(e){var t=e.ws,n=Object(i.useRef)(null),c=function(){var e=Object(Re.a)(Je.a.mark((function e(n){var a,i;return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=n.target.files[0],console.log(a),(i=new FileReader).readAsText(a,"UTF-8"),i.onload=function(e){console.log(e.target.result),t.send({event:"pages_import",data:{value:e.target.result}})},i.onerror=function(e){console.error("error reading file")}}catch(c){console.error(c)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(L,{icon:"message_ok",title:"Pages"}),Object(a.jsxs)(A,{type:"raised",children:[Object(a.jsx)(ne.a,{onClick:function(e){t.listen_for_response("pages_export",{},(function(e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e.data.value)),t.setAttribute("download","pages.json"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}))},children:"Export pages"}),Object(a.jsx)(ne.a,{onClick:function(e){n.current.click()},children:"Import pages"}),Object(a.jsx)("input",{type:"file",id:"file",ref:n,accept:"*.json",style:{display:"none"},onChange:c})]})]})},Ve=Object(O.a)((function(e){return Object(g.a)({root:{display:"flex"},appBar:{zIndex:1302},drawer:{width:460,flexShrink:0},drawerPaper:{width:460},content:{flexGrow:1,padding:e.spacing(3)}})}));var Ke=function(e){var t=e.states,n=e.ws,c=Ve(),l=Object(i.useState)(!1),r=Object(u.a)(l,2),s=r[0],o=r[1],d=Object(i.useState)(null),j=Object(u.a)(d,2),f=j[0],p=j[1],b=function(e){return function(t){o(void 0===e?!s:e)}},x=function(e){return function(t){void 0===e&&(e=null===f),p(e?t.currentTarget:null)}};return Object(a.jsx)(h.a,{children:Object(a.jsxs)("div",{className:c.root,children:[Object(a.jsx)(k.a,{}),Object(a.jsx)(w.a,{position:"fixed",className:c.appBar,children:Object(a.jsxs)(C.a,{style:{display:"flex",paddingRight:"12px"},children:[Object(a.jsx)(N.a,{mdUp:!0,children:Object(a.jsx)(_.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:b(),children:Object(a.jsx)(W.a,{})})}),Object(a.jsx)(h.b,{to:"/",children:Object(a.jsx)("img",{src:"/logo512.png",alt:"Homecon logo",style:{height:"50px",marginRight:"20px",marginLeft:"10px"}})}),Object(a.jsx)(S.a,{variant:"h6",style:{flexGrow:1},noWrap:!0,children:"HomeCon"}),Object(a.jsx)(_.a,{color:"inherit","aria-label":"open menu",onClick:x(),children:Object(a.jsx)(J.a,{})})]})}),Object(a.jsx)(N.a,{mdUp:!0,children:Object(a.jsxs)(m.a,{anchor:"left",className:c.drawer,classes:{paper:c.drawerPaper},open:s,onClose:b(!1),onOpen:b(!0),children:[Object(a.jsx)(C.a,{}),Object(a.jsx)(z,{groups:e.pagesData.groups,closeMenu:b(!1)})]})}),Object(a.jsx)(N.a,{smDown:!0,children:Object(a.jsxs)(y.a,{anchor:"left",className:c.drawer,classes:{paper:c.drawerPaper},variant:"permanent",children:[Object(a.jsx)(C.a,{}),Object(a.jsx)(z,{groups:e.pagesData.groups})]})}),Object(a.jsxs)(D.a,{anchorEl:f,keepMounted:!0,open:Boolean(f),onClose:x(!1),anchorReference:"none",PaperProps:{style:{top:"70px",right:"12px"}},children:[Object(a.jsx)(T.a,{onClick:x(!1),component:h.b,to:"/profile",children:"Profile"}),Object(a.jsx)(T.a,{onClick:x(!1),component:h.b,to:"/states",children:"States"}),Object(a.jsx)(T.a,{onClick:x(!1),component:h.b,to:"/edit-pages",children:"Pages"}),Object(a.jsx)(T.a,{onClick:x(!1),component:h.b,to:"/plugins",children:"Plugins"}),Object(a.jsx)(T.a,{onClick:x(!1),children:"Logout"})]}),Object(a.jsxs)("main",{className:c.content,children:[Object(a.jsx)(C.a,{}),Object(a.jsxs)(v.c,{children:[Object(a.jsx)(v.a,{path:"/pages/:group/:page",children:Object(a.jsx)(Te,{pagesData:e.pagesData,states:t,ws:n})}),Object(a.jsx)(v.a,{path:"/login",children:"Login"}),Object(a.jsx)(v.a,{path:"/profile",children:"Profile"}),Object(a.jsx)(v.a,{path:"/states",children:Object(a.jsx)(qe,{states:t,ws:n})}),Object(a.jsx)(v.a,{path:"/edit-pages",children:Object(a.jsx)(Qe,{ws:n})}),Object(a.jsx)(v.a,{path:"/plugins",children:"Plugins"}),Object(a.jsx)(v.a,{path:"/",children:Object(a.jsx)(Ie,{page:De(e.pagesData,"home","home"),states:t,ws:n})})]})]})]})})},Xe=n(217),Ye=n(209),et=n(210),tt=n(103),nt=n.n(tt),at=Object(b.a)({palette:{background:{default:"rgba(38, 38, 38, 1)",paper:"rgba(30, 30, 30, 1)"},primary:{main:"rgba(20, 20, 20, 1)",light:"rgba(55, 55, 55, 1)",dark:"rgba(10, 10, 10, 1)",contrastText:"rgba(240, 240, 240, 1)"},secondary:{main:"rgba(229, 229, 229, 1)",light:"rgba(220, 220, 220, 1)",dark:"rgba(200, 200, 200, 1)",contrastText:"rgba(33, 33, 33, 1)"},text:{primary:"rgba(233, 233, 233, 0.87)",secondary:"rgba(190, 190, 190, 1)",disabled:"rgba(0, 0, 0, 1)",hint:"rgba(75, 75, 75, 1)"},widget:{on:"rgba(247, 154, 31, 1)",off:"rgba(240, 240, 240, 1)"}},overrides:{MuiSlider:{colorPrimary:{color:"rgba(240, 240, 240, 1)"}},MuiSwitch:{colorSecondary:{"&$checked":{color:"rgba(247, 154, 31, 1)"},"&$checked + $track":{backgroundColor:"rgba(247, 154, 31, 1)"}}}}}),it=function(){function e(t){Object(f.a)(this,e),this.timeout=250,this.app=t,this.ws=null,this.event_listeners={}}return Object(p.a)(e,[{key:"connect",value:function(e){var t=this;console.log("attempting to connect to homecon at ".concat(this.app.state.wsUrl));var n,a=this.app.state.wsUrl+"/"+this.app.state.token;try{n=new WebSocket(a)}catch(l){console.error(l),n=null}if(null!==n){var i,c=this;n.onopen=function(){console.log("Connected to HomeCon server at ".concat(t.app.state.wsUrl)),t.ws=n,t.app.setState({ws:t});var e=JSON.parse(window.localStorage.getItem("pages_data"));t.parse_pages_data(e),t.send({event:"pages_timestamp",data:{id:null}}),t.send({event:"state_list",data:{id:null}}),c.timeout=250,clearTimeout(i)},n.onclose=function(e){console.log("Socket is closed. Reconnect will be attempted in ".concat(Math.min(10,(c.timeout+c.timeout)/1e3)," second.")),c.timeout=c.timeout+c.timeout,t.app.setState({ws:null}),i=setTimeout(t.check.bind(t),Math.min(1e4,c.timeout))},n.onerror=function(e){console.error("Socket encountered error, Closing socket"),n.close()},n.onmessage=function(e){var n=JSON.parse(e.data);if(console.log("received ".concat(e.data)),"pages_timestamp"===n.event)(null===t.app.state.pagesData||void 0===t.app.state.pagesData.timestamp||t.app.state.pagesData.timestamp<n.data.value)&&t.send({event:"pages_pages",data:{id:null}});else if("pages_pages"===n.event)t.app.setState({pagesData:n.data.value}),window.localStorage.setItem("pages_data",JSON.stringify(n.data.value)),t.parse_pages_data(n.data.value);else if("state_list"===n.event){var a={};n.data.value.forEach((function(e,t){a[e.id]=e})),t.app.setState({states:a})}else if("state_value"===n.event){var i=Object(j.a)({},t.app.state.states);void 0===i||void 0===i[n.data.id]?console.info("no state with id ".concat(n.data.id)):i[n.data.id].value=n.data.value,t.app.setState({states:i})}else void 0!==t.event_listeners[n.event]&&t.event_listeners[n.event](n)}}}},{key:"send",value:function(e){var t=JSON.stringify(e);console.log("sending ".concat(t));try{this.ws.send(t)}catch(n){console.log(n)}}},{key:"listen_for_response",value:function(e,t,n){this.event_listeners[e]=function(e){n(e)},this.send({event:e,data:t})}},{key:"parse_pages_data",value:function(e){null!==e&&this.app.setState({pagesData:e})}},{key:"check",value:function(){var e=this.ws;e&&e.readyState!==WebSocket.CLOSED||this.connect()}}]),e}();function ct(e){var t=e.wsUrl,n=e.setWsUrl,c=e.token,l=e.setToken,r=e.connect,s=e.connected,o=Object(i.useState)(!1),d=Object(u.a)(o,2),j=d[0],f=d[1];return Object(i.useEffect)((function(){f(!s)}),[s]),Object(a.jsx)("div",{children:Object(a.jsx)(te.a,{open:j,children:Object(a.jsxs)("div",{style:{margin:"20px"},children:[Object(a.jsx)(S.a,{children:"Not connected to homecon"}),Object(a.jsxs)(Xe.a,{children:[Object(a.jsx)(Ye.a,{expandIcon:Object(a.jsx)(nt.a,{}),children:Object(a.jsx)(S.a,{children:"Connection settings"})}),Object(a.jsx)(et.a,{children:Object(a.jsxs)(S.a,{children:[Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(Ue.a,{label:"HomeCon Web Socket url",value:t,onChange:function(e){return n(e.target.value)}}),Object(a.jsx)(Ue.a,{label:"Token",type:"password",value:c,onChange:function(e){return l(e.target.value)}})]}),Object(a.jsx)("div",{style:{marginTop:"10px"},children:Object(a.jsx)(ne.a,{onClick:function(){return r()},children:"re-connect"})})]})})]})]})})})}var lt=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(f.a)(this,n),(a=t.call(this,e)).homeconWebsocket=new it(Object(s.a)(a));var i=window.localStorage.getItem("websocketUrl");null===i&&(i="ws://localhost:9099");var c=window.localStorage.getItem("token");return null===c&&(c=""),a.state={wsUrl:i,token:c,ws:null,states:null,pages:null,pagesData:{timestamp:0,groups:[]}},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.homeconWebsocket.check()}},{key:"setWsUrl",value:function(e){this.setState({wsUrl:e}),window.localStorage.setItem("websocketUrl",e)}},{key:"setToken",value:function(e){this.setState({token:e}),window.localStorage.setItem("token",e)}},{key:"render",value:function(){var e=this;return Object(a.jsxs)(x.a,{theme:at,children:[Object(a.jsx)(Ke,{pagesData:this.state.pagesData,states:this.state.states,ws:this.state.ws}),Object(a.jsx)(ct,{wsUrl:this.state.wsUrl,setWsUrl:function(t){return e.setWsUrl(t)},token:this.state.token,setToken:function(t){return e.setToken(t)},connect:function(){return e.homeconWebsocket.check()},connected:null!==this.state.ws})]})}}]),n}(c.a.Component);n(139);r.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(lt,{})}),document.getElementById("root"))}},[[140,1,2]]]);
//# sourceMappingURL=main.b6e8f89c.chunk.js.map