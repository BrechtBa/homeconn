{"version":3,"sources":["Icon.js","PagesMenu.js","PageLayout.js","widgets/Base.js","widgets/Switch.js","widgets/Dimmer.js","widgets/Value.js","widgets/Shading.js","widgets/Alarm.js","widgets/Clock.js","widgets/Weather.js","widgets/Button.js","Pages.js","ViewStates.js","ViewEditPages.js","Layout.js","App.js","index.js"],"names":["HomeconIcon","props","src","color","name","undefined","style","height","useStyles","makeStyles","theme","createStyles","group","display","cursor","minHeight","padding","backgroundColor","palette","secondary","main","borderTop","dark","fontSize","fontWeight","textDecoration","contrastText","light","page","position","borderBottom","primary","alignItems","pageIcon","width","pageTitle","marginLeft","HomeconPagesMenuGroup","classes","menuPages","pages","closeMenu","menu","map","HomeconPagesMenuPage","title","config","path","icon","className","onClick","handleClick","Collapse","in","collapsed","link","to","e","HomeconPagesMenu","useState","openGroupPath","setOpenGroupPath","toggleCollapse","event","groups","filter","pageHeader","marginBottom","flexGrow","alignSelf","margin","pageHeaderWidget","pageSection","underlined","PageHeader","widget","pageWidget","PageSection","type","children","Paper","top","left","BaseStatusLight","value","valueThreshold","colorOn","colorOff","BaseValueDisplay","precision","prefix","suffix","displayValue","parseFloat","toFixed","marginRight","BaseSlider","valueMin","valueMax","onChange","Slider","valueToSliderValue","min","max","step","v","sliderValueToValue","BaseAlarm","alarm","actions","onDelete","timePickerOpen","setTimePickerOpen","React","Date","timePickerDate","setTimePickerDate","deleteDialogOpen","setDeleteDialogOpen","JSON","parse","trigger","day_of_week","dayOfWeekTrigger","setDayOfWeekTrigger","action","id","forEach","a","time","hh","mm","hour","String","minute","parseTime","handleDayChange","day","newDayOfWeekTrigger","stringify","index","indexOf","splice","push","sort","newAlarm","newDayOfWeekTriggerStr","substring","length","dayJsx","flexDirection","justifyContent","label","Switch","checked","useTheme","border","borderColor","borderRadius","d","Dialog","onClose","open","utils","DateFnsUtils","date","ampm","variant","Button","getHours","getMinutes","flexFlow","Fab","aria-label","marginTop","InputLabel","Select","labelId","target","MenuItem","root","HomeconSwitch","stateId","state","valueOn","valueOff","states","ws","send","data","HomeconMultiSwitch","levels","values","threshold","getStatusValue","levelValue","Math","abs","level","console","log","rest","slider","HomeconDimmer","setValue","newValue","HomeconValue","iconLeft","iconRight","HomeconShading","iconOpen","iconClosed","positionOpen","positionClosed","paddingBottom","HomeconAlarm","alarmStates","actionStates","Object","s","parent","handleAlarmChange","handleAlarmDelete","bottom","right","HomeconClock","setDate","useEffect","interval","setInterval","clearInterval","getTime","locale","options","dateOptions","weekday","year","month","toLocaleDateString","getDate","HomeconWeatherBlock","daily","timeoffset","hourly","getIcon","alt","textAlign","timestamp","temperature_max","getTemperature","wind_speed","getWindSpeed","wind_direction","round","getWindDirection","rain","getRain","HomeconWeatherForecastSummary","HomeconButton","clickEvent","clickData","HomeconStateValueButton","statusState","getPage","pagesData","groupName","pageName","p","some","HomeconPages","params","useParams","HomeconPage","showHeader","headerWidget","HomeconWidget","show_header","pageContent","sections","section","widgets","tableRow","EditStateDialog","parentState","onCancel","onSave","setName","setParent","setType","quantity","setQuantity","unit","setUnit","setLabel","description","setDescription","setConfig","TextField","multiline","parseInt","isNaN","newState","handleSave","StatesList","updateState","addState","editStateDialogOpen","setEditStateDialogOpen","selectedState","setSelectedState","setParentState","menuAnchorEl","setMenuAnchorEl","makeStateList","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","component","scope","tableCell","IconButton","size","currentTarget","openMenu","Menu","anchorEl","keepMounted","Boolean","ListItemIcon","ListItemText","fullWidth","maxWidth","float","ViewStates","inputFile","useRef","onFileChange","file","files","reader","FileReader","readAsText","onload","evt","result","onerror","error","err","listen_for_response","message","element","document","createElement","setAttribute","encodeURIComponent","body","appendChild","click","removeChild","current","ref","accept","ViewEditPages","appBar","zIndex","drawer","flexShrink","drawerPaper","content","spacing","HomeconLayout","pagesMenuOpen","setPagesMenuOpen","settingsMenuAnchor","setSettingsMenuAnchor","togglePagesMenu","toggleSettingsMenu","CssBaseline","AppBar","Toolbar","paddingRight","Hidden","mdUp","edge","Typography","noWrap","SwipeableDrawer","anchor","paper","onOpen","smDown","Drawer","anchorReference","PaperProps","Link","darkTheme","createMuiTheme","background","default","text","disabled","hint","on","off","overrides","MuiSlider","colorPrimary","MuiSwitch","colorSecondary","HomeconWebsocket","app","timeout","this","event_listeners","url","wsUrl","fullUrl","token","WebSocket","connectInterval","that","onopen","setState","pages_data","window","localStorage","getItem","parse_pages_data","clearTimeout","onclose","setTimeout","check","bind","close","onmessage","setItem","item","info","str_data","callback","readyState","CLOSED","connect","ConnectionSettings","setWsUrl","setToken","connected","setOpen","Accordion","AccordionSummary","expandIcon","AccordionDetails","App","homeconWebsocket","ThemeProvider","val","Component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b6e8f89c.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\n//function HomeconIcon({ name, ...rest }) {\n//  const ImportedIconRef = useRef(null);\n//  const [loading, setLoading] = useState(false);\n//\n//  useEffect(() => {\n//    setLoading(true);\n//    const importIcon = async () => {\n//      try {\n//        ImportedIconRef.current = (await import(`./icons/${name}.svg`)).ReactComponent;\n//      } catch (err) {\n//        // Your own error handling logic, throwing error for the sake of\n//        // simplicity\n//        throw err;\n//      } finally {\n//        setLoading(false);\n//      }\n//    };\n//    importIcon();\n//  }, [name]);\n//\n//  return <MyIcon {...rest} />;\n//\n//  console.log(loading, ImportedIconRef)\n//  if (!loading && ImportedIconRef.current) {\n//    const { current: ImportedIcon } = ImportedIconRef;\n//    return <ImportedIcon {...rest} />;\n//  }\n//\n//  return null;\n//};\n\nfunction HomeconIcon(props) {\n  const src = `/icons/${props.color || '#fff'}/${props.name || 'blank'}.png`;\n  if(props.name !== undefined){\n    return (\n      <img src={src} style={{height: '100%'}}/>\n    );\n  }\n  return null;\n};\n\n\nexport default HomeconIcon;","import React, { useState } from 'react';\nimport { Link } from \"react-router-dom\";\n\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\nimport Collapse from '@material-ui/core/Collapse';\n\nimport HomeconIcon from './Icon.js';\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    group: {\n        display: 'block',\n        cursor: 'pointer',\n        minHeight: '16px',\n        padding: '12px 12px 12px 40px',\n        backgroundColor: theme.palette.secondary.main,\n        borderTop: 'solid 1px ' + theme.palette.secondary.dark,\n        fontSize: '16px',\n        fontWeight: 700,\n        textDecoration: 'none',\n        color: theme.palette.secondary.contrastText,\n        '&:hover': {\n          backgroundColor: theme.palette.secondary.light,\n      },\n    },\n    page: {\n      display: 'flex',\n      position: 'relative',\n      cursor: 'pointer',\n      height: '60px',\n      borderBottom: 'solid 1px ' + theme.palette.primary.main,\n      fontSize: '18px',\n      fontWeight: 700,\n      textDecoration: 'none',\n      color: theme.palette.primary.contrastText,\n      '&:hover': {\n          backgroundColor: theme.palette.primary.light,\n      },\n      alignItems: 'center'\n    },\n    pageIcon: {\n      width: '59px',\n      height: '59px'\n    },\n    pageTitle: {\n      marginLeft: '40px'\n    }\n  })\n);\n\n\nfunction HomeconPagesMenu(props){\n\n  const [openGroupPath, setOpenGroupPath] = useState(null);\n  const closeMenu = props.closeMenu;\n\n  const toggleCollapse = (group) => (event) =>  {\n    setOpenGroupPath(group.path)\n  };\n\n  if(props.groups !== undefined){\n    const menuGroups = props.groups.filter((group) => group.path !== '/home')\n\n    const menu = menuGroups.map((group) => <HomeconPagesMenuGroup key={group.path} title={group.config.title} path={group.path} pages={group.pages}\n                                            handleClick={toggleCollapse(group)} collapsed={openGroupPath===group.path} closeMenu={closeMenu}/>);\n    return menu;\n  }\n  else {\n    return '';\n  }\n}\n\n\nfunction HomeconPagesMenuGroup(props){\n  const classes = useStyles();\n\n  const menuPages = props.pages\n  const closeMenu = props.closeMenu;\n\n  const menu = menuPages.map((page) => <HomeconPagesMenuPage key={page.path} title={page.config.title} path={page.path} icon={page.config.icon} closeMenu={closeMenu}/>);\n  return (\n    <div>\n      <span className={classes.group} onClick={props.handleClick}>{props.title}</span>\n      <Collapse in={props.collapsed}>\n        {menu}\n      </Collapse>\n    </div>\n  );\n}\n\n\nfunction HomeconPagesMenuPage(props){\n  const classes = useStyles();\n\n  const link = `/pages${props.path}`\n  const closeMenu = props.closeMenu;\n\n  return (\n    <div>\n      <Link to={link} className={classes.page} onClick={(e) => closeMenu !== undefined ? closeMenu() : null}>\n        <div className={classes.pageIcon}>\n          <HomeconIcon name={props.icon} color=\"ffffff\"/>\n        </div>\n        <div className={classes.pageTitle}>{props.title}</div>\n      </Link>\n    </div>\n  );\n}\n//        <MyIcon stroke=\"#ffffff\"/>\n\n\nexport default HomeconPagesMenu;","import { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\n\nimport HomeconIcon from './Icon.js';\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    pageHeader: {\n      display: 'flex',\n      marginBottom: '20px'\n    },\n    pageIcon: {\n      height: '60px'\n    },\n    pageTitle: {\n      flexGrow: 1,\n      alignSelf: 'center',\n      margin: '5px 5px 5px 20px',\n      fontSize: '26px',\n      fontWeight: 700,\n    },\n    pageHeaderWidget: {\n\n    },\n    pageSection: {\n      width: '100%',\n      marginBottom: '25px',\n      padding: '10px',\n      position: 'relative'\n    },\n    underlined: {\n      borderBottom: '1px solid ' + theme.palette.primary.main\n    }\n  })\n);\n\n\nexport function PageHeader(props){\n  const title = props.title;\n  const icon = props.icon;\n  const widget = props.widget;\n\n  const classes = useStyles();\n\n  return (\n    <div className={classes.pageHeader}>\n      <div className={classes.pageIcon}>\n        <HomeconIcon name={icon} color=\"ffffff\"/>\n      </div>\n      <div className={classes.pageTitle}>\n        {title}\n      </div>\n      <div className={classes.pageWidget}>\n        {widget}\n      </div>\n   </div>\n  );\n}\n\n\nexport function PageSection(props){\n  const title = props.title;\n  const type = props.type;\n\n  const children = props.children\n\n  const classes = useStyles();\n\n  if(type === 'raised') {\n    return (\n      <Paper className={classes.pageSection}>\n        <div style={{position: 'absolute', top: '-12px', left: '5px'}}>{title}</div>\n        <div>\n          {children}\n        </div>\n      </Paper>\n    );\n  }\n  else if(type === 'underlined') {\n    return (\n      <div className={`${classes.pageSection} ${classes.underlined}`}>\n        {children}\n      </div>\n    );\n  }\n  else {\n    return (\n      <div className={classes.pageSection}>\n        {children}\n      </div>\n    );\n  }\n}\n","import React, { useState } from 'react';\nimport { useTheme } from '@material-ui/styles';\n\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\nimport Slider from '@material-ui/core/Slider';\nimport Fab from '@material-ui/core/Fab';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Switch from '@material-ui/core/Switch';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {MuiPickersUtilsProvider, KeyboardTimePicker} from '@material-ui/pickers';\n\n\nimport HomeconIcon from '../Icon.js';\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    pageHeader: {\n    },\n  })\n);\n\n\nfunction BaseStatusLight(props){\n\n  const value = props.value;\n  const valueThreshold = props.valueThreshold;\n  const icon = props.icon;\n  const colorOn = props.colorOn;\n  const colorOff = props.colorOff;\n\n  const color = value > valueThreshold ? colorOn : colorOff;\n  return <HomeconIcon color={color} name={icon}/>;\n\n}\n\nfunction BaseValueDisplay(props){\n  const value = props.value;\n  const precision = props.precision;\n  const prefix = props.prefix;\n  const suffix = props.suffix;\n\n  let displayValue = value\n\n  if(typeof value == 'number'){\n    displayValue = parseFloat(value).toFixed(precision)\n  }\n\n  return (\n    <div style={{display: 'inline-block'}}>\n      <span style={{marginRight: '5px'}}>{prefix}</span>\n      <span style={{fontSize: '16px', fontWeight: 700}}>{displayValue}</span>\n      <span style={{marginLeft: '5px'}}>{suffix}</span>\n    </div>\n  );\n}\n\nfunction BaseSlider(props){\n  const value = props.value;\n  const valueMin = props.valueMin;\n  const valueMax = props.valueMax;\n  const onChange = props.onChange;\n\n  const valueToSliderValue = (value) =>{\n    return (value-valueMin)/(valueMax-valueMin) * 100\n  }\n  const sliderValueToValue = (value) =>{\n    return valueMin + value * (valueMax-valueMin) / 100\n  }\n\n  return (\n    <Slider value={valueToSliderValue(value)} min={0} max={100} step={1} onChange={(e, v) => onChange(e, sliderValueToValue(v)) }/>\n  );\n}\n\n\nfunction BaseAction(props){\n  const state = props.state\n\n  const openEditDialog = (e) => {\n    console.log(e)\n  }\n\n  const openDeleteDialog = (e) => {\n    console.log(e)\n  }\n\n  return (\n    <div>\n      <div>{state.label}</div>\n      <div class=\"controls\">\n        <Fab color=\"primary\" aria-label=\"edit\" onClick={openEditDialog}>\n          <EditIcon />\n        </Fab>\n        <Fab color=\"primary\" aria-label=\"delete\" onClick={openDeleteDialog}>\n          <DeleteIcon />\n        </Fab>\n      </div>\n    </div>\n  )\n}\n\n\nfunction BaseAlarm(props){\n  const alarm = props.alarm;\n  const actions = props.actions;\n  const onChange = props.onChange;\n  const onDelete = props.onDelete;\n\n  const [timePickerOpen, setTimePickerOpen] = useState(false)\n  const [timePickerDate, setTimePickerDate] = React.useState(new Date('1970-01-01T00:00:00'));\n\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false)\n\n  const [dayOfWeekTrigger, setDayOfWeekTrigger] = React.useState(JSON.parse(`[${alarm.value.trigger.day_of_week}]`));\n\n  let action = {id: 'no_action', 'label': 'No action'};\n  actions.forEach((a) => {\n    if(alarm.value.action === a.id){\n      action = a;\n    }\n  });\n\n  const parseTime = (trigger) => {\n    var hh = '00';\n    var mm = '00';\n\n    if(trigger !== undefined && trigger.hour !== null){\n      hh = String(trigger.hour);\n      if(trigger.hour < 10){\n          hh = '0' + hh;\n      }\n    }\n    if(trigger !== undefined && trigger.minute !== null){\n      mm = String(trigger.minute);\n      if(trigger.minute < 10){\n          mm = '0' + mm;\n      }\n    }\n    return hh+':'+mm;\n  }\n\n  const weekDays = [\n    {index: 0, day: 'mon', label: 'Mon'},\n    {index: 1, day: 'tue', label: 'Tue'},\n    {index: 2, day: 'wed', label: 'Wed'},\n    {index: 3, day: 'thu', label: 'Thu'},\n    {index: 4, day: 'fri', label: 'Fri'},\n  ]\n\n  const weekendDays = [\n    {index: 5, day: 'sat', label: 'Sat'},\n    {index: 6, day: 'sun', label: 'Sun'},\n  ]\n\n  const time = parseTime(alarm.value.trigger)\n\n  const openTimePicker = () => {\n    const d = new Date(`1970-01-01T${time}:00`)\n    setTimePickerDate(d)\n    setTimePickerOpen(true)\n  }\n\n  const handleTimePickerChange = (date) => {\n    setTimePickerDate(date)\n  }\n\n  const handleTimePickerClose = (e) => {\n    setTimePickerOpen(false)\n  }\n\n  const handleTimeChange = (e) => {\n    setTimePickerOpen(false)\n\n    let newAlarm = JSON.parse(JSON.stringify(alarm));\n    newAlarm.value.trigger.hour = timePickerDate.getHours();\n    newAlarm.value.trigger.minute = timePickerDate.getMinutes();\n    onChange(newAlarm)\n  }\n\n  const handleDayChange = (e, day) => {\n    let newDayOfWeekTrigger = JSON.parse(JSON.stringify(dayOfWeekTrigger))\n    const index = newDayOfWeekTrigger.indexOf(day.index);\n    if(index > -1){\n      newDayOfWeekTrigger.splice(index, 1);\n    }\n    else{\n      newDayOfWeekTrigger.push(day.index)\n      newDayOfWeekTrigger = newDayOfWeekTrigger.sort()\n    }\n    setDayOfWeekTrigger(newDayOfWeekTrigger)\n\n    let newAlarm = JSON.parse(JSON.stringify(alarm));\n    const newDayOfWeekTriggerStr = JSON.stringify(newDayOfWeekTrigger)\n    newAlarm.value.trigger.day_of_week = newDayOfWeekTriggerStr.substring(1, newDayOfWeekTriggerStr.length - 1);\n    onChange(newAlarm)\n  }\n\n  const handleActionChange = (e) => {\n    let newAlarm = JSON.parse(JSON.stringify(alarm));\n    newAlarm.value.action = e.target.value;\n    onChange(newAlarm)\n  }\n\n  const handleDeleteDialogClose = () => {\n    setDeleteDialogOpen(false)\n  }\n\n  const handleDeleteAlarm = () => {\n    onDelete(alarm);\n  }\n\n  const dayJsx = (day) => {\n    return (\n      <div key={day.index} style={{display: 'flex', flexDirection: 'column', justifyContent: 'center'}}>\n        <div>{day.label}</div>\n        <Switch checked={dayOfWeekTrigger.indexOf(day.index) > -1} onChange={(e) => {return handleDayChange(e, day)}} />\n      </div>\n    )\n  }\n\n  const theme = useTheme()\n\n  return (\n    <div style={{border: 'solid 1px', borderColor: theme.palette.primary.light, borderRadius: '5px', padding: '10px', position: 'relative'}}>\n      <div style={{display: 'flex', width: '100%'}}>\n\n        <div style={{width: '100%'}}>\n          <div style={{fontSize: '45px', marginRight: '20px', marginBottom: '5px', cursor: 'pointer'}} onClick={openTimePicker}>\n            {time}\n          </div>\n\n          <Dialog onClose={handleTimePickerClose} open={timePickerOpen}>\n            <MuiPickersUtilsProvider utils={DateFnsUtils}>\n              <KeyboardTimePicker margin=\"normal\" id=\"time-picker\" label=\"Time\" value={timePickerDate} onChange={handleTimePickerChange} ampm={false} variant=\"static\"/>\n            </MuiPickersUtilsProvider>\n            <Button variant=\"contained\" onClick={() => setTimePickerOpen(false)}>cancel</Button>\n            <Button variant=\"contained\" color=\"primary\" onClick={handleTimeChange}>save</Button>\n          </Dialog>\n\n          <div style={{display: 'flex', flexFlow: 'row wrap', width: '100%'}}>\n            <div style={{display: 'flex', flexFlow: 'row wrap'}}>\n              {weekDays.map((day) => {\n                return dayJsx(day)\n              })}\n            </div>\n            <div style={{display: 'flex', flexFlow: 'row wrap'}}>\n               {weekendDays.map((day) => {\n                return dayJsx(day)\n              })}\n            </div>\n          </div>\n        </div>\n\n        <Fab color=\"primary\" aria-label=\"delete\" onClick={(e) => setDeleteDialogOpen(true)}>\n          <DeleteIcon />\n        </Fab>\n        <Dialog onClose={handleDeleteDialogClose} open={deleteDialogOpen}>\n          <h3>Delete alarm?</h3>\n          <Button variant=\"contained\" onClick={() => setDeleteDialogOpen(false)}>cancel</Button>\n          <Button variant=\"contained\" color=\"primary\" onClick={(e) => handleDeleteAlarm()}>Delete</Button>\n        </Dialog>\n\n      </div>\n\n      <div style={{width: '100%', marginTop: '5px'}}>\n        <InputLabel id=\"action-select-label\">Action</InputLabel>\n        <Select style={{width: '80%'}} labelId=\"action-select-label\" id=\"demo-simple-select-helper\" value={action.id} onChange={handleActionChange}>\n          {actions.map((a) => {\n            return <MenuItem key={a.id} value={a.id}>{a.label}</MenuItem>\n          })}\n        </Select>\n      </div>\n\n    </div>\n  );\n}\n\nexport {BaseStatusLight, BaseValueDisplay, BaseSlider, BaseAction, BaseAlarm};","import React from 'react';\n\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\n\nimport {BaseStatusLight} from './Base.js';\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      cursor: 'pointer'\n    },\n    label: {\n      fontSize: '16px',\n      fontWeight: 700\n    },\n    icon: {\n      width: '60px',\n      height: '60px',\n    }\n  })\n);\n\n\nfunction HomeconSwitch(props){\n  const config = props.config;\n\n  const stateId = config.state;\n  const icon = config.icon || 'light_light';\n  const colorOn = config.colorOn || 'f79a1f';\n  const colorOff = config.colorOff || 'ffffff';\n  const valueOn = config.valueOn || 1;\n  const valueOff = config.valueOff || 0;\n\n  const valueThreshold = 0.5*valueOn + 0.5*valueOff;\n  const states = props.states;\n  const ws = props.ws\n\n  let state = undefined;\n  if(states !== null){\n    state = states[stateId];\n  }\n  if(state === undefined){\n    state = {value: 0, label: ''};\n  }\n  const label = config.label || state.label;\n\n  const classes = useStyles();\n\n  const handleClick = (event) => {\n    ws.send({event: 'state_value', data: {id: state.id, value: state.value > valueThreshold ? valueOff : valueOn}})\n  }\n\n  return (\n    <div className={classes.root} onClick={handleClick}>\n      <div className={classes.icon}>\n        <BaseStatusLight value={state.value} valueThreshold={valueThreshold} icon={icon} colorOn={colorOn} colorOff={colorOff} />\n      </div>\n      <div className={classes.label}>{label}</div>\n    </div>\n  )\n}\n\n\nfunction HomeconMultiSwitch(props){\n  const config = props.config;\n\n  const stateId = config.state;\n  const levels = config.values || [\n    {value: 0, icon: 'vent_ventilation_level_0'},\n    {value: 1, icon: 'vent_ventilation_level_1'},\n    {value: 2, icon: 'vent_ventilation_level_2'},\n    {value: 3, icon: 'vent_ventilation_level_3'},\n  ];\n  const threshold = config.threshold || 0.1;\n  const colorOn = config.colorOn || 'f79a1f';\n  const colorOff = config.colorOff || 'ffffff';\n  const states = props.states;\n  const ws = props.ws\n\n  let state = undefined;\n  if(states !== null){\n    state = states[stateId];\n  }\n  if(state === undefined){\n    state = {value: 0, label: ''};\n  }\n  const label = config.label || state.label;\n\n  const handleClick = (value) => {\n    const handle = (event) => {\n      console.log({id: state.id, value: value})\n      ws.send({event: 'state_value', data: {id: state.id, value: value}})\n    };\n    return handle;\n  }\n\n  const getStatusValue = (value, levelValue) => {\n    if(Math.abs(value - levelValue) < threshold){\n      return 1;\n    }\n    return 0;\n  }\n\n  const classes = useStyles();\n\n  return (\n    <div style={{display: \"flex\", flexDirection: \"column\"}}>\n\n      <div className={classes.label}>{label}</div>\n      <div style={{display: \"flex\", flexDirection: \"row\"}}>\n        {levels.map((level, index) => (\n          <div className={classes.icon} style={{cursor: 'pointer'}} key={index} onClick={handleClick(level.value)}>\n            <BaseStatusLight value={getStatusValue(state.value, level.value)} valueThreshold={0.5} icon={level.icon}\n             colorOn={colorOn} colorOff={colorOff}/>\n          </div>\n        ))}\n      </div>\n\n    </div>\n  )\n}\n\n\nexport {HomeconSwitch, HomeconMultiSwitch};","import React, { useState } from 'react';\n\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\n\nimport {BaseStatusLight, BaseSlider} from './Base.js';\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n    },\n    icon: {\n      width: '60px',\n      height: '60px',\n      cursor: 'pointer'\n    },\n    rest: {\n      display: 'flex',\n      flexDirection: 'column',\n      flexGrow: 1,\n    },\n    slider: {\n      marginLeft: '15px',\n      marginRight: '15px',\n    },\n    label: {\n      fontSize: '16px',\n      fontWeight: 700\n    },\n  })\n);\n\n\nfunction HomeconDimmer(props){\n  const config = props.config;\n\n  const stateId = config.state;\n  const icon = config.icon || 'light_light';\n  const colorOn = config.colorOn || 'f79a1f';\n  const colorOff = config.colorOff || 'ffffff';\n  const valueOn = config.valueOn || 1;\n  const valueOff = config.valueOff || 0;\n\n  const valueThreshold = 0.01*valueOn + 0.99*valueOff;\n  const states = props.states;\n  const ws = props.ws\n\n  let state = undefined;\n  if(states !== null){\n    state = states[stateId];\n  }\n  if(state === undefined){\n    state = {value: 0, label: ''};\n  }\n  const label = config.label || state.label;\n\n  const classes = useStyles();\n\n  const setValue = (value) => {\n    ws.send({event: 'state_value', data: {id: state.id, value: value}});\n  }\n\n  const handleClick = (event) => {\n    setValue(state.value > valueThreshold ? valueOff : valueOn);\n  }\n\n  const onChange = (event, newValue) => {\n    setValue(newValue);\n  }\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.icon} onClick={(e) => handleClick(e)}>\n        <BaseStatusLight value={state.value} valueThreshold={valueThreshold} icon={icon} colorOn={colorOn} colorOff={colorOff} />\n      </div>\n\n      <div className={classes.rest}>\n        <div className={classes.label}>{label}</div>\n        <div className={classes.slider}>\n          <BaseSlider value={state.value} valueMin={valueOff} valueMax={valueOn} onChange={onChange} />\n        </div>\n      </div>\n    </div>\n  );\n\n}\n\n\nexport {HomeconDimmer};","import React from 'react';\n\nimport {BaseValueDisplay} from './Base.js';\n\n\nfunction HomeconValue(props){\n  const config = props.config;\n\n  const stateId = config.state;\n  const precision = config.precision || 0;\n  const prefix = config.prefix || '';\n  const suffix = config.suffix || '';\n\n  const states = props.states;\n\n  let state = undefined;\n  if(states !== null){\n    state = states[stateId];\n  }\n  if(state === undefined){\n    state = {value: 0};\n  }\n\n  return (\n    <BaseValueDisplay value={state.value} precision={precision} prefix={prefix} suffix={suffix} />\n  )\n\n}\n\n\nexport {HomeconValue};","import React from 'react';\n\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\n\nimport {BaseSlider} from './Base.js';\nimport HomeconIcon from '../Icon.js';\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n    },\n    iconLeft: {\n      width: '60px',\n      height: '60px',\n      cursor: 'pointer',\n      display: 'flex',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n    },\n    iconRight: {\n      width: '60px',\n      height: '60px',\n      cursor: 'pointer',\n      display: 'flex',\n      justifyContent: 'flex-end',\n      alignItems: 'center',\n    },\n    rest: {\n      display: 'flex',\n      flexDirection: 'column',\n      flexGrow: 1,\n    },\n    slider: {\n      marginLeft: '15px',\n      marginRight: '15px',\n    },\n    label: {\n      fontSize: '16px',\n      fontWeight: 700\n    },\n  })\n);\n\n\nfunction HomeconShading(props){\n  const config = props.config;\n\n  const stateId = config.state;\n  const iconOpen = config.iconOpen || 'fts_shutter_10';\n  const iconClosed = config.iconClosed || 'fts_shutter_100';\n  const positionOpen = config.positionOpen || 0;\n  const positionClosed = config.positionClosed || 1;\n\n  const states = props.states;\n  const ws = props.ws\n\n  let state = undefined;\n  if(states !== null){\n    state = states[stateId];\n  }\n  if(state === undefined){\n    state = {value: 0, label: ''};\n  }\n  const label = config.label || state.label;\n\n  const classes = useStyles();\n\n  const setValue = (value) => {\n    ws.send({event: 'state_value', data: {id: state.id, value: value}});\n  }\n\n  const openShading = (event) => {\n    setValue(positionOpen);\n  }\n  const closeShading = (event) => {\n    setValue(positionClosed);\n  }\n\n  const onChange = (event, newValue) => {\n    setValue(newValue);\n  }\n\n  return (\n    <div className={classes.root}>\n      <div>\n        <div className={classes.iconLeft} onClick={openShading}>\n          <HomeconIcon color=\"ffffff\" name={iconOpen}/>\n        </div>\n      </div>\n      <div className={classes.rest}>\n        <div className={classes.label}>{label}</div>\n        <div className={classes.slider}>\n          <BaseSlider value={state.value} valueMin={positionOpen} valueMax={positionClosed} onChange={onChange} />\n        </div>\n      </div>\n      <div>\n        <div className={classes.iconRight} onClick={closeShading}>\n          <HomeconIcon color=\"ffffff\" name={iconClosed}/>\n        </div>\n      </div>\n    </div>\n  );\n\n}\n\n\nexport {HomeconShading};","import React from 'react';\n\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport {BaseAlarm} from './Base.js';\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      position: 'relative',\n      marginTop: '10px',\n      minHeight: '50px',\n      paddingBottom: '30px'\n    },\n    label: {\n      fontSize: '16px',\n      fontWeight: 700\n    },\n    icon: {\n      width: '60px',\n      height: '60px',\n    }\n  })\n);\n\n\nfunction HomeconAlarm(props){\n  const classes = useStyles();\n\n  const config = props.config;\n\n  const stateId = config.state;\n  const states = props.states;\n  const ws = props.ws\n\n  if(states === null){\n    return null\n  }\n\n  const state = states[stateId];\n  if(state === undefined){\n    return null\n  }\n  const label = config.label || state.label;\n\n  let alarmStates = []\n  let actionStates = []\n\n  Object.values(states).forEach((s) => {\n    if(s.parent === state.id){\n      if(s.type === 'alarm'){\n        alarmStates.push(s)\n      }\n      if(s.type === 'action'){\n        actionStates.push(s)\n      }\n    }\n  });\n\n  const addAlarm = () => {\n    ws.send({event: 'add_schedule', data: {id: state.id}})\n  }\n\n  const handleAlarmChange = (alarm) => {\n    ws.send({event: 'state_value', data: {id: alarm.id, value: alarm.value}})\n  }\n\n  const handleAlarmDelete = (alarm) => {\n    ws.send({event: 'delete_schedule', data: {id: alarm.id}})\n  }\n\n  return (\n    <div className={classes.root}>\n      <div>{label || state.label}</div>\n      <div>\n        {alarmStates.map((alarm) => {\n          return (\n            <div key={alarm.id} style={{marginBottom: '5px'}}>\n              <BaseAlarm alarm={alarm} actions={actionStates} onChange={handleAlarmChange} onDelete={handleAlarmDelete}/>\n            </div>\n          );\n        })}\n      </div>\n      <Fab style={{position: 'absolute', bottom: '-10px', right: '10px'}} color=\"primary\" aria-label=\"delete\" onClick={(e) => addAlarm()}>\n        <AddIcon />\n      </Fab>\n    </div>\n  )\n\n}\n\n\nexport {HomeconAlarm};","import React, { useEffect, useState } from 'react';\n\n\nfunction HomeconClock(props){\n  const config = props.config;\n  const [date, setDate] = useState(new Date());\n\n  useEffect(() => {\n    const interval = setInterval(\n      () => setDate(new Date()), 1000\n    );\n    return () => {\n      clearInterval(interval);\n    }\n  }, []);\n\n  const getTime = (date) => {\n    let hour = date.getHours();\n    if(hour < 10){\n      hour = `0${hour}`;\n    }\n    else {\n      hour = `${hour}`;\n    }\n    let minute = date.getMinutes();\n    if(minute < 10){\n      minute = `0${minute}`;\n    }\n    else {\n      minute = `${minute}`;\n    }\n    return `${hour}:${minute}`\n  }\n  const getDate = (date) => {\n    const locale = config.locale || 'nl-BE';\n    const options = config.dateOptions || {weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'};\n    return date.toLocaleDateString(locale, options)\n  }\n\n  return (\n    <div>\n      <div style={{display: \"flex\", flexDirection: \"row\", justifyContent: \"center\", fontSize: \"6em\", fontWeight: 700}}>\n        {getTime(date)}\n      </div>\n      <div style={{display: \"flex\", flexDirection: \"row\", justifyContent: \"center\", fontSize: \"1.2em\",}}>\n        {getDate(date)}\n      </div>\n    </div>\n  )\n}\n\n\nexport {HomeconClock};","import React from 'react';\n\n\nfunction HomeconWeatherBlock(props){\n  const config = props.config;\n  const states = props.states;\n\n  let state = undefined;\n  if(states!== null){\n    let path = '';\n    if(config.daily){\n      path = `/weather/forecast/daily/${config.timeoffset}`;\n    }\n    else if(config.hourly){\n      path = `/weather/forecast/hourly/${config.timeoffset}`;\n    }\n\n    for (const value of Object.values(states)) {\n      if(value.path === path){\n        state = value;\n        break;\n      }\n    }\n  }\n\n  if(state === undefined){\n    state = {value: {}};\n  }\n\n  const getIcon = (value) => {\n    if(value.icon !== undefined && value.icon !== null){\n      return `/weather/${value.icon}.png`;\n    }\n    else{\n      return '/weather/blank.png';\n    }\n  }\n\n  const getDate = (value) => {\n    if(value.timestamp !== undefined && value.timestamp !== null){\n      const date = new Date(value.timestamp * 1000);\n      const locale = config.locale || 'nl-BE';\n      const options = config.dateOptions || {weekday: 'long'};\n      return date.toLocaleDateString(locale, options)\n    }\n    else {\n      return '';\n    }\n  }\n\n  const getTemperature = (value) => {\n    if(value.temperature_max !== undefined && value.temperature_max !== null){\n      return `${(value.temperature_max).toFixed(1)} °C`\n    }\n    else{\n      return ''\n    }\n  }\n\n  const getWindSpeed = (value) => {\n    if(value.wind_speed !== undefined && value.wind_speed !== null){\n      return `${(value.wind_speed*3.6).toFixed(0)} km/h`\n    }\n    else{\n      return ''\n    }\n  }\n  const getWindDirection = (value) => {\n    const dirs = ['N','NO','O','ZO','Z','ZW','W','NW','N'];\n    if(value.wind_direction !== undefined && value.wind_direction !== null){\n      return dirs[Math.round(value.wind_direction/360*8)];\n    }\n    else{\n      return ''\n    }\n  }\n  const getRain = (value) => {\n    if(value.rain !== undefined && value.rain !== null){\n      return `Regen: ${(value.rain).toFixed(0)} mm`\n    }\n    else{\n      return ''\n    }\n  }\n\n  return (\n    <div>\n      <img src={getIcon(state.value)} style={{width: \"100%\"}} alt=\"weather forecast\"/>\n      <div style={{textAlign: \"center\"}}>{getDate(state.value)}</div>\n      <div style={{textAlign: \"center\"}}>{getTemperature(state.value)}</div>\n      <div style={{textAlign: \"center\"}}>{getWindSpeed(state.value)} {getWindDirection(state.value)}</div>\n      <div style={{textAlign: \"center\"}}>{getRain(state.value)}</div>\n    </div>\n  )\n}\n\nfunction HomeconWeatherForecastSummary(props) {\n  const states = props.states;\n  return (\n    <div style={{display: \"flex\", flexDirection: \"row\", marginLeft: \"-20px\", marginRight: \"-20px\"}}>\n      <HomeconWeatherBlock config={{daily: true, timeoffset: 0}} states={states} style={{width: \"60px\", flexGrow: 1}}/>\n      <HomeconWeatherBlock config={{daily: true, timeoffset: 1}} states={states} style={{width: \"60px\", flexGrow: 1}}/>\n      <HomeconWeatherBlock config={{daily: true, timeoffset: 2}} states={states} style={{width: \"60px\", flexGrow: 1}}/>\n      <HomeconWeatherBlock config={{daily: true, timeoffset: 3}} states={states} style={{width: \"60px\", flexGrow: 1}}/>\n    </div>\n  )\n}\n\nexport {HomeconWeatherBlock, HomeconWeatherForecastSummary};","import React from 'react';\n\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nimport {BaseStatusLight} from './Base.js';\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      cursor: 'pointer'\n    },\n    icon: {\n      width: '40px',\n      height: '40px',\n    }\n  })\n);\n\n\nfunction HomeconButton(props){\n  const config = props.config;\n\n  const clickEvent = config.event;\n  const clickData = config.data;\n  const label = config.label;\n\n  const stateId = config.state;\n  const icon = config.icon || 'light_light';\n  const colorOn = config.colorOn || 'f79a1f';\n  const colorOff = config.colorOff || 'ffffff';\n  const valueOn = config.valueOn || 1;\n  const valueOff = config.valueOff || 0;\n\n  const valueThreshold = 0.5*valueOn + 0.5*valueOff;\n  const states = props.states;\n  const ws = props.ws\n\n  let state = undefined;\n  if(states !== null){\n    state = states[stateId];\n  }\n\n  const handleClick = (event) => {\n    ws.send({event: clickEvent, data: clickData})\n  }\n\n  const classes = useStyles();\n\n  return (\n    <Button className={classes.root} onClick={() => handleClick()}>\n      {state !== undefined && (\n        <div className={classes.icon}>\n          <BaseStatusLight value={state.value} valueThreshold={valueThreshold} icon={icon} colorOn={colorOn} colorOff={colorOff} />\n        </div>)}\n      {label}\n    </Button>\n  )\n}\n\nfunction HomeconStateValueButton(props){\n  const config = props.config;\n\n  const stateId = config.state;\n  const value = config.value;\n\n  return HomeconButton({\n    config: {\n      event: 'state_value',\n      data: {id: stateId, value: value},\n      label: config.label,\n      state: config.statusState,\n      icon: config.icon,\n      colorOn: config.colorOn,\n      colorOff: config.colorOff,\n      valueOn: config.valueOn,\n      valueOff: config.valueOff\n    },\n    states: props.states,\n    ws: props.ws\n  })\n}\n\n\n\nexport {HomeconButton, HomeconStateValueButton};","import React from 'react';\nimport { useParams } from \"react-router-dom\";\n\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\n\n\nimport {PageHeader, PageSection} from './PageLayout.js'\nimport {HomeconSwitch, HomeconMultiSwitch} from './widgets/Switch.js';\nimport {HomeconDimmer} from './widgets/Dimmer.js';\nimport {HomeconValue} from './widgets/Value.js';\nimport {HomeconShading} from './widgets/Shading.js';\nimport {HomeconAlarm} from './widgets/Alarm.js';\nimport {HomeconClock} from './widgets/Clock.js';\nimport {HomeconWeatherBlock, HomeconWeatherForecastSummary} from './widgets/Weather.js';\nimport {HomeconButton, HomeconStateValueButton} from './widgets/Button.js';\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    pageHeader: {\n      display: 'flex',\n      marginBottom: '20px'\n    },\n    pageIcon: {\n      height: '60px'\n    },\n    pageTitle: {\n      flexGrow: 1,\n      alignSelf: 'center',\n      margin: '5px 5px 5px 20px',\n      fontSize: '26px',\n      fontWeight: 700,\n    },\n    pageHeaderWidget: {\n\n    },\n    pageSection: {\n      width: '100%',\n      marginBottom: '25px',\n      padding: '10px',\n      position: 'relative'\n    },\n    underlined: {\n      borderBottom: '1px solid ' + theme.palette.primary.main\n    }\n  })\n);\n\nconst getPage = (pagesData, groupName, pageName) => {\n  let p = null\n\n  if((groupName !== undefined) && (pageName !== undefined) && (pagesData.groups !== undefined)){\n    pagesData.groups.some((group) => {\n      if(group.name === groupName){\n        group.pages.some((page) => {\n          if(page.name === pageName){\n            p = page\n            return true;\n          }\n          return false;\n        });\n        return true;\n      }\n      return false;\n    });\n  }\n  return p;\n}\n\n\nfunction HomeconPages(props){\n\n  const pagesData = props.pagesData;\n  const states = props.states;\n  const ws = props.ws;\n\n  const params = useParams()\n  const groupName = params.group;\n  const pageName = params.page;\n\n  const page = getPage(pagesData, groupName, pageName)\n  if(page !== null){\n    return <HomeconPage page={page} states={states} ws={ws}/>;\n  }\n  return null;\n}\n\n\nfunction HomeconPage(props){\n  const page = props.page;\n  const states = props.states;\n  const ws = props.ws;\n  let showHeader = true;\n\n  const classes = useStyles();\n\n  let headerWidget = '';\n  if(page !== null && page.config.widget !== undefined){\n    headerWidget = <HomeconWidget key={page.config.widget.path} type={page.config.widget.type} config={page.config.widget.config}\n                    states={states} ws={ws}/>\n  }\n  if(page !== null && page.config.show_header !== undefined){\n    showHeader = page.config.show_header;\n  }\n\n  if(page !== null){\n    return (\n      <div>\n        {showHeader && (<PageHeader icon={page.config.icon} title={page.config.title} widget={headerWidget}/>)}\n        <div className={classes.pageContent}>\n\n        {page.sections.map((section) => (\n          <PageSection key={section.path} title={section.config.title} type={section.config.type}>\n            {section.widgets.map((widget) => {\n              return <HomeconWidget key={widget.path} type={widget.type} config={widget.config} states={states} ws={ws}/>\n            })}\n          </PageSection>\n        ))}\n        </div>\n      </div>\n    );\n  }\n  return '';\n}\n\n\n\nfunction HomeconWidget(props){\n  const type = props.type;\n  const config = props.config;\n  const states = props.states;\n  const ws = props.ws;\n\n  if(type === 'switch'){\n    return <HomeconSwitch config={config} states={states} ws={ws}/>\n  }\n  else if(type === 'dimmer'){\n    return <HomeconDimmer config={config} states={states} ws={ws}/>\n  }\n  else if(type === 'shading'){\n    return <HomeconShading config={config} states={states} ws={ws}/>\n  }\n  else if(type === 'value-display'){\n    return <HomeconValue config={config} states={states}/>\n  }\n  else if(type === 'alarm'){\n    return <HomeconAlarm config={config} states={states} ws={ws}/>\n  }\n  else if(type === 'clock'){\n    return <HomeconClock config={config}/>\n  }\n  else if(type === 'weather-block'){\n    return <HomeconWeatherBlock config={config} states={states}/>\n  }\n  else if(type === 'weather-forecast-summary'){\n    return <HomeconWeatherForecastSummary config={config} states={states}/>\n  }\n  else if(type === 'button'){\n    return <HomeconButton config={config} states={states} ws={ws}/>\n  }\n  else if(type === 'state-value-button'){\n    return <HomeconStateValueButton config={config} states={states} ws={ws}/>\n  }\n  else if(type === 'multi-switch'){\n    return <HomeconMultiSwitch config={config} states={states} ws={ws}/>\n  }\n\n\n\n  return (\n    <div>{type} {JSON.stringify(config)}</div>\n  );\n}\n\n\nexport {HomeconPage, HomeconPages, getPage};","import React, { useState, useRef, useEffect } from 'react';\n\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport Fab from '@material-ui/core/Fab';\nimport IconButton from '@material-ui/core/IconButton';\nimport AddIcon from '@material-ui/icons/Add';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\n\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\n\nimport {PageHeader, PageSection} from './PageLayout.js'\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    tableRow: {\n      borderColor: '#ff0000',\n    },\n  })\n)\n\nfunction EditStateDialog(props){\n  const state = props.state;\n  const parentState = props.parentState || null;\n  const states = props.states;\n\n  console.log(parentState)\n\n  const onCancel = props.onCancel;\n  const onSave = props.onSave;\n\n  const [name, setName] = useState('')\n  const [parent, setParent] = useState(null)\n  const [type, setType] = useState('')\n  const [quantity, setQuantity] = useState('')\n  const [unit, setUnit] = useState('')\n  const [label, setLabel] = useState('')\n  const [description, setDescription] = useState('')\n  const [config, setConfig] = useState('{}')\n  const [value, setValue] = useState('')\n\n  useEffect(() => {\n    if(state !== null){\n      setName(state.name || '');\n      setParent(state.parent || null);\n      setType(state.type || '');\n      setQuantity(state.quantity || '');\n      setUnit(state.unit || '');\n      setLabel(state.label || '');\n      setDescription(state.description || '');\n      setConfig(state.config !== null ? JSON.stringify(state.config, undefined, 2) : '{}');\n      setValue(state.value !== null ? JSON.stringify(state.value) : '');\n    }\n    else if(parentState !== null){\n      setParent(parentState.id);\n    }\n  }, [state, parentState]);\n\n  const handleSave = () => {\n    let newValue = null;\n    if(type === 'int'){\n      newValue = parseInt(value);\n      if(isNaN(newValue)){\n        newValue = null;\n      }\n    }\n    else if(type === 'float'){\n      newValue = parseFloat(value);\n      if(isNaN(newValue)){\n        newValue = null;\n      }\n    }\n    else if(type === 'bool'){\n      newValue = parseInt(value);\n      if(isNaN(newValue)){\n        newValue = null;\n      }\n      else if(newValue > 1){\n        newValue = 1;\n      }\n      else if(newValue < 0){\n        newValue = 0;\n      }\n    }\n    else if(type === 'str'){\n      newValue = value;\n    }\n\n    else{\n      try {\n        newValue = JSON.parse(value);\n      }\n      catch{\n        newValue = value;\n      }\n    }\n\n    let newState = {}\n    if(state !== null){\n      newState.id = state.id;\n    }\n    newState.name = name;\n    newState.parent = parent;\n    newState.type = type === '' ? null : type;\n    newState.quantity = quantity;\n    newState.label = label;\n    newState.description = description;\n    newState.config = JSON.parse(config);\n    newState.value = newValue;\n\n    onSave(newState);\n  }\n\n  return (\n    <div>\n      <form>\n        <div style={{display: 'flex', flexDirection: 'column'}}>\n          <TextField label=\"Name\" value={name} onChange={(e) => setName(e.target.value)}/>\n          <InputLabel id=\"Parent-select-label\">Parent</InputLabel>\n          <Select style={{width: '80%'}} labelId=\"action-select-label\" id=\"demo-simple-select-helper\" value={parent} onChange={(e) => setParent(e.target.value)}>\n            <MenuItem value={null}>/</MenuItem>\n            {states.map((a) => {\n              return <MenuItem key={a.id} value={a.id}>{a.path}</MenuItem>\n            })}\n          </Select>\n          <TextField label=\"Type\" value={type} onChange={(e) => setType(e.target.value)}/>\n          <TextField label=\"Quantity\" value={quantity} onChange={(e) => setQuantity(e.target.value)}/>\n          <TextField label=\"Unit\" value={unit} onChange={(e) => setUnit(e.target.value)}/>\n          <TextField label=\"Label\" value={label} onChange={(e) => setLabel(e.target.value)}/>\n          <TextField label=\"Description\" value={description} onChange={(e) => setDescription(e.target.value)}/>\n          <TextField label=\"Config\" value={config} onChange={(e) => setConfig(e.target.value)} multiline/>\n          <TextField label=\"Value\" value={value} onChange={(e) => setValue(e.target.value)}/>\n        </div>\n        <div style={{marginTop: '10px'}}>\n          <Button onClick={(e) => handleSave()}>Save</Button>\n          <Button onClick={(e) => onCancel()}>Cancel</Button>\n        </div>\n      </form>\n    </div>\n  )\n\n}\n\n\nfunction StatesList(props) {\n\n  const states = props.states;\n  const updateState = props.updateState;\n  const addState = props.addState;\n\n  const [editStateDialogOpen, setEditStateDialogOpen] = useState(false)\n  const [selectedState, setSelectedState] = useState(null)\n  const [parentState, setParentState] = useState(null)\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null);\n\n  const openMenu = (event, state) => {\n    setSelectedState(state);\n    setMenuAnchorEl(event.currentTarget);\n  };\n  const closeMenu = () => {\n    setMenuAnchorEl(null);\n  };\n  const editStateDialog = () => {\n    closeMenu();\n    setEditStateDialogOpen(true);\n  }\n  const addStateDialog = () => {\n    setSelectedState(null);\n    setEditStateDialogOpen(true);\n  }\n  const addChildStateDialog = () => {\n    closeMenu();\n    setParentState(selectedState)\n    setSelectedState(null);\n    setEditStateDialogOpen(true);\n  }\n\n\n  const handleSave = (state) => {\n    setEditStateDialogOpen(false)\n    if(state.id === undefined){\n      addState(state)\n    }\n    else {\n      updateState(state)\n    }\n  }\n\n  const classes = useStyles();\n\n  const makeStateList = (states) => {\n    if (states === null ){\n      return [];\n    }\n    else {\n      const statesList = Object.values(states).map((value) => {\n        return value;\n      })\n      return statesList;\n    }\n  }\n\n  return (\n    <div>\n      <TableContainer>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Path</TableCell>\n              <TableCell>Type</TableCell>\n              <TableCell align=\"right\">Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {makeStateList(states).map((state) => (\n              <TableRow key={state.id}>\n                <TableCell component=\"th\" scope=\"row\" classes={classes.tableCell}>\n                  {state.path}\n                </TableCell>\n                <TableCell classes={classes.tableCell}>\n                  {state.type}\n                </TableCell>\n                <TableCell align=\"right\" classes={classes.tableCell}>\n                  <IconButton aria-label=\"more\" color=\"inherit\" size=\"small\" onClick={(e) => openMenu(e, state)}>\n                    <MoreIcon />\n                  </IconButton>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      <Menu anchorEl={menuAnchorEl} keepMounted open={Boolean(menuAnchorEl)} onClose={closeMenu}>\n        <MenuItem onClick={editStateDialog}>\n          <ListItemIcon style={{color: \"#ffffff\"}}>\n            <EditIcon/>\n          </ListItemIcon>\n          <ListItemText primary=\"Edit\" />\n        </MenuItem>\n        <MenuItem onClick={addChildStateDialog}>\n          <ListItemIcon style={{color: \"#ffffff\"}}>\n            <AddIcon/>\n          </ListItemIcon>\n          <ListItemText primary=\"Add Child\" />\n        </MenuItem>\n        <MenuItem onClick={closeMenu}>\n          <ListItemIcon style={{color: \"#ffffff\"}}>\n            <DeleteIcon/>\n          </ListItemIcon>\n          <ListItemText primary=\"Delete\" />\n        </MenuItem>\n      </Menu>\n\n      <Dialog open={editStateDialogOpen} onClose={(e) => setEditStateDialogOpen(false)} fullWidth maxWidth=\"sm\">\n        <div style={{padding: '10px'}}>\n          <EditStateDialog state={selectedState} parentState={parentState} states={makeStateList(states)} onCancel={(e) => setEditStateDialogOpen(false)} onSave={handleSave}/>\n        </div>\n      </Dialog>\n\n      <Fab color=\"primary\" aria-label=\"add\" style={{float: 'right', marginRight: '20px', marginTop: '-5px'}} onClick={addStateDialog}>\n        <AddIcon />\n      </Fab>\n\n    </div>\n  );\n}\n\nfunction ViewStates(props) {\n  const states = props.states;\n  const ws = props.ws;\n\n  const export_states = () =>{\n    ws.listen_for_response(\n      'states_export', {}, (message) => {\n        const filename = 'states.json'\n        const element = document.createElement('a');\n        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(message.data.value));\n        element.setAttribute('download', filename);\n        element.style.display = 'none';\n        document.body.appendChild(element);\n        element.click();\n        document.body.removeChild(element);\n      }\n    )\n  }\n\n  const inputFile = useRef(null)\n\n  const openFileInput = () => {\n    inputFile.current.click();\n  }\n\n  const onFileChange = async (event) => {\n    try {\n      const file = event.target.files[0];\n      var reader = new FileReader();\n      reader.readAsText(file, \"UTF-8\");\n      reader.onload = function (evt) {\n        ws.send({event: 'states_import', data: {value: evt.target.result}})\n      }\n      reader.onerror = function (evt) {\n          console.error('error reading file')\n      }\n\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n\n  return (\n    <div>\n      <PageHeader icon=\"message_ok\" title=\"States\"/>\n\n      <PageSection type=\"raised\">\n        <Button onClick={(e) => export_states()}>Export states</Button>\n        <Button onClick={e => openFileInput()}>Import states</Button>\n        <input type='file' id='file' ref={inputFile} accept=\"*.json\" style={{display: 'none'}} onChange={onFileChange}/>\n      </PageSection>\n\n      <PageSection type=\"raised\">\n        <StatesList states={states}\n         updateState={(state) => ws.send({event: 'state_update', data: state})}\n         addState={(state) => ws.send({event: 'state_add', data: state})} />\n      </PageSection>\n    </div>\n  );\n}\n\nexport default ViewStates;","import React, { useRef } from 'react';\n\nimport Button from '@material-ui/core/Button';\n\n\nimport {PageHeader, PageSection} from './PageLayout.js'\n\n\nfunction ViewEditPages(props) {\n  const ws = props.ws;\n\n  const export_pages = () =>{\n    ws.listen_for_response(\n      'pages_export', {}, (message) => {\n        const filename = 'pages.json'\n        const element = document.createElement('a');\n        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(message.data.value));\n        element.setAttribute('download', filename);\n        element.style.display = 'none';\n        document.body.appendChild(element);\n        element.click();\n        document.body.removeChild(element);\n      }\n    )\n  }\n\n  const inputFile = useRef(null)\n\n  const openFileInput = () => {\n    inputFile.current.click();\n  }\n\n  const onFileChange = async (event) => {\n    try {\n      const file = event.target.files[0];\n      console.log(file)\n      var reader = new FileReader();\n      reader.readAsText(file, \"UTF-8\");\n      reader.onload = function (evt) {\n        console.log(evt.target.result);\n        ws.send({event: 'pages_import', data: {value: evt.target.result}})\n      }\n      reader.onerror = function (evt) {\n          console.error('error reading file')\n      }\n\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n\n  return (\n    <div>\n      <PageHeader icon=\"message_ok\" title=\"Pages\"/>\n\n      <PageSection type=\"raised\">\n        <Button onClick={(e) => export_pages()}>Export pages</Button>\n        <Button onClick={e => openFileInput()}>Import pages</Button>\n        <input type='file' id='file' ref={inputFile} accept=\"*.json\" style={{display: 'none'}} onChange={onFileChange}/>\n      </PageSection>\n\n    </div>\n  );\n}\n\nexport default ViewEditPages;","import React, { useState } from 'react';\nimport { BrowserRouter, Switch, Route, Link } from \"react-router-dom\";\n\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport Drawer from '@material-ui/core/Drawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Hidden from '@material-ui/core/Hidden';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport MoreIcon from '@material-ui/icons/MoreVert';\n\nimport HomeconPagesMenu from './PagesMenu.js';\nimport {HomeconPage, HomeconPages, getPage} from './Pages.js';\nimport ViewStates from './ViewStates.js';\nimport ViewEditPages from './ViewEditPages.js';\n\n\nconst drawerWidth = 460;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n    },\n    appBar: {\n      zIndex: 1302\n    },\n    drawer: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n    drawerPaper: {\n      width: drawerWidth,\n    },\n    content: {\n      flexGrow: 1,\n      padding: theme.spacing(3),\n    },\n  }),\n);\n\n\nfunction HomeconLayout(props){\n\n  const states = props.states;\n  const ws = props.ws;\n\n  const classes = useStyles();\n  const [pagesMenuOpen, setPagesMenuOpen] = useState(false);\n  const [settingsMenuAnchor, setSettingsMenuAnchor] = useState(null);\n\n  const togglePagesMenu = (open) => (event) => {\n    if(open === undefined){\n      setPagesMenuOpen(!pagesMenuOpen);\n    }\n    else{\n      setPagesMenuOpen(open);\n    }\n  }\n\n  const toggleSettingsMenu = (open) => (event) => {\n    if(open === undefined){\n      open = settingsMenuAnchor === null;\n    }\n    if(open){\n      setSettingsMenuAnchor(event.currentTarget);\n    }\n    else{\n      setSettingsMenuAnchor(null);\n    }\n  };\n\n  return (\n    <BrowserRouter>\n      <div className={classes.root}>\n        <CssBaseline />\n        <AppBar position=\"fixed\" className={classes.appBar}>\n          <Toolbar style={{display: \"flex\", paddingRight: \"12px\"}}>\n            <Hidden mdUp>\n              <IconButton edge=\"start\" color=\"inherit\" aria-label=\"open drawer\" onClick={togglePagesMenu()}>\n                <MenuIcon/>\n              </IconButton>\n            </Hidden>\n            <Link to=\"/\">\n              <img src=\"/logo512.png\" alt=\"Homecon logo\" style={{height: '50px', marginRight: '20px', marginLeft: '10px'}}/>\n            </Link>\n            <Typography variant=\"h6\" style={{flexGrow: 1}}  noWrap>\n                HomeCon\n            </Typography>\n\n            <IconButton color=\"inherit\" aria-label=\"open menu\" onClick={toggleSettingsMenu()}>\n              <MoreIcon/>\n            </IconButton>\n\n          </Toolbar>\n        </AppBar>\n\n        <Hidden mdUp>\n          <SwipeableDrawer anchor=\"left\" className={classes.drawer} classes={{paper: classes.drawerPaper}}\n           open={pagesMenuOpen} onClose={togglePagesMenu(false)} onOpen={togglePagesMenu(true)}>\n            <Toolbar />\n            <HomeconPagesMenu groups={props.pagesData.groups} closeMenu={togglePagesMenu(false)}/>\n          </SwipeableDrawer>\n        </Hidden>\n\n        <Hidden smDown>\n          <Drawer anchor=\"left\" className={classes.drawer} classes={{paper: classes.drawerPaper}} variant=\"permanent\">\n            <Toolbar />\n            <HomeconPagesMenu groups={props.pagesData.groups} />\n          </Drawer>\n        </Hidden>\n\n        <Menu anchorEl={settingsMenuAnchor} keepMounted open={Boolean(settingsMenuAnchor)} onClose={toggleSettingsMenu(false)}\n         anchorReference=\"none\" PaperProps={{style: {top: '70px', right: '12px'}}}>\n          <MenuItem onClick={toggleSettingsMenu(false)} component={Link} to=\"/profile\">Profile</MenuItem>\n          <MenuItem onClick={toggleSettingsMenu(false)} component={Link} to=\"/states\">States</MenuItem>\n          <MenuItem onClick={toggleSettingsMenu(false)} component={Link} to=\"/edit-pages\">Pages</MenuItem>\n          <MenuItem onClick={toggleSettingsMenu(false)} component={Link} to=\"/plugins\">Plugins</MenuItem>\n          <MenuItem onClick={toggleSettingsMenu(false)}>Logout</MenuItem>\n        </Menu>\n\n        <main className={classes.content}>\n          <Toolbar />\n          <Switch>\n            <Route path=\"/pages/:group/:page\" children={<HomeconPages pagesData={props.pagesData} states={states} ws={ws}/>} >\n            </Route>\n            <Route path=\"/login\">\n              Login\n            </Route>\n            <Route path=\"/profile\">\n              Profile\n            </Route>\n            <Route path=\"/states\">\n              <ViewStates states={states} ws={ws}/>\n            </Route>\n            <Route path=\"/edit-pages\">\n              <ViewEditPages ws={ws}/>\n            </Route>\n            <Route path=\"/plugins\">\n              Plugins\n            </Route>\n            <Route path=\"/\">\n              <HomeconPage page={getPage(props.pagesData, 'home', 'home')} states={states} ws={ws}/>\n            </Route>\n          </Switch>\n        </main>\n\n      </div>\n    </BrowserRouter>\n  );\n}\n\n\n\nexport default HomeconLayout;","import React, { useState, useEffect }  from 'react';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\n\nimport HomeconLayout from './Layout.js';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\n\n\nconst darkTheme = createMuiTheme({\n  palette: {\n    background: {\n      default: \"rgba(38, 38, 38, 1)\",\n      paper: \"rgba(30, 30, 30, 1)\"\n    },\n    primary: {\n      main: \"rgba(20, 20, 20, 1)\",\n      light: \"rgba(55, 55, 55, 1)\",\n      dark: \"rgba(10, 10, 10, 1)\",\n      contrastText: \"rgba(240, 240, 240, 1)\",\n    },\n    secondary: {\n      main: \"rgba(229, 229, 229, 1)\",\n      light: \"rgba(220, 220, 220, 1)\",\n      dark: \"rgba(200, 200, 200, 1)\",\n      contrastText: \"rgba(33, 33, 33, 1)\",\n    },\n    text: {\n      primary: \"rgba(233, 233, 233, 0.87)\",\n      secondary: \"rgba(190, 190, 190, 1)\",\n      disabled: \"rgba(0, 0, 0, 1)\",\n      hint: \"rgba(75, 75, 75, 1)\",\n    },\n    widget: {\n      on: \"rgba(247, 154, 31, 1)\",\n      off: \"rgba(240, 240, 240, 1)\",\n    }\n  },\n\n  overrides: {\n    MuiSlider: {\n      colorPrimary: {\n        color: \"rgba(240, 240, 240, 1)\",\n      },\n    },\n    MuiSwitch: {\n      colorSecondary: {\n        '&$checked': {\n          color: \"rgba(247, 154, 31, 1)\",\n        },\n        '&$checked + $track': {\n          backgroundColor: \"rgba(247, 154, 31, 1)\",\n        },\n      },\n    }\n\n  },\n});\n\n\nclass HomeconWebsocket {\n\n  constructor(app) {\n    this.app = app\n    this.ws = null\n    this.event_listeners = {}\n  }\n\n  timeout = 250; // Initial timeout duration as a class variable\n\n  connect(url) {\n    console.log(`attempting to connect to homecon at ${this.app.state.wsUrl}`)\n\n    const fullUrl = this.app.state.wsUrl + \"/\" + this.app.state.token;\n    let ws\n    try{\n      ws = new WebSocket(fullUrl);\n    }\n    catch(error){\n      console.error(error)\n      ws = null\n    }\n\n    if (ws !== null) {\n      let that = this; // cache the this\n      let connectInterval;\n\n      // websocket onopen event listener\n      ws.onopen = () => {\n        console.log(`Connected to HomeCon server at ${this.app.state.wsUrl}`);\n        this.ws = ws\n\n        // add the websocket to the state\n        this.app.setState({\n          ws: this\n        });\n\n        // send connection messages\n        // user auth\n        // pages\n        const pages_data = JSON.parse(window.localStorage.getItem('pages_data'));\n        this.parse_pages_data(pages_data)\n        this.send({'event': 'pages_timestamp', data: {'id': null}})\n\n        // states\n        this.send({'event': 'state_list', data: {'id': null}})\n\n        that.timeout = 250; // reset timer to 250 on open of websocket connection\n        clearTimeout(connectInterval); // clear Interval on on open of websocket connection\n      };\n\n      // websocket onclose event listener\n      ws.onclose = e => {\n        console.log(\n          `Socket is closed. Reconnect will be attempted in ${Math.min(10000 / 1000, (that.timeout + that.timeout) / 1000)} second.`\n        );\n\n        that.timeout = that.timeout + that.timeout; //increment retry interval\n        this.app.setState({\n          ws: null\n        });\n        connectInterval = setTimeout(this.check.bind(this), Math.min(10000, that.timeout)); //call check function after timeout\n      };\n\n      // websocket onerror event listener\n      ws.onerror = err => {\n        console.error(\n          \"Socket encountered error, Closing socket\"\n        );\n        ws.close();\n      };\n\n      ws.onmessage = evt => {\n        // listen to data sent from the websocket server\n        const message = JSON.parse(evt.data)\n        console.log(`received ${evt.data}`)\n\n        if(message.event === 'pages_timestamp'){\n          if(this.app.state.pagesData === null || this.app.state.pagesData.timestamp === undefined ||\n             this.app.state.pagesData.timestamp < message.data.value){\n            this.send({'event': 'pages_pages', data: {'id': null}})\n          }\n        }\n        else if(message.event === 'pages_pages'){\n          this.app.setState({\n            pagesData: message.data.value\n          });\n          window.localStorage.setItem('pages_data', JSON.stringify(message.data.value));\n          this.parse_pages_data(message.data.value)\n        }\n        else if(message.event === 'state_list'){\n          const states = {};\n          message.data.value.forEach((item, index) => {\n             states[item.id] = item;\n          });\n          this.app.setState({\n            states: states\n          });\n\n        }\n        else if(message.event === 'state_value'){\n\n          var states = {...this.app.state.states}\n          if(states === undefined || states[message.data.id] === undefined){\n            console.info(`no state with id ${message.data.id}`)\n          }\n          else{\n            states[message.data.id].value = message.data.value;\n          }\n\n          this.app.setState({\n            states: states\n          });\n        }\n        else if(this.event_listeners[message.event] !== undefined){\n          this.event_listeners[message.event](message)\n        }\n      }\n    }\n  };\n\n  send(data) {\n    const str_data = JSON.stringify(data)\n    console.log(`sending ${str_data}`)\n    try {\n      this.ws.send(str_data)\n    } catch (error) {\n      console.log(error)\n    }\n  };\n\n  listen_for_response(event, data, callback) {\n    this.event_listeners[event] = (message) => {\n      callback(message);\n      // remove the listener?\n    }\n    this.send({event: event, data: data})\n  };\n\n  parse_pages_data(pages_data) {\n    if(pages_data !== null){\n      this.app.setState({\n        pagesData: pages_data\n      });\n    }\n  }\n\n  /**\n   * utilited by the @function connect to check if the connection is close, if so attempts to reconnect\n   */\n  check() {\n    const  ws = this.ws;\n    if (!ws || ws.readyState === WebSocket.CLOSED){\n      this.connect(); //check if websocket instance is closed, if so call `connect` function.\n    }\n  };\n\n}\n\n\nfunction ConnectionSettings(props){\n  const wsUrl = props.wsUrl;\n  const setWsUrl = props.setWsUrl;\n  const token = props.token;\n  const setToken = props.setToken;\n\n  const connect = props.connect;\n  const connected = props.connected;\n\n  const [open, setOpen] = useState(false)\n\n  useEffect(() => {\n    setOpen(!connected)\n  }, [connected])\n\n  return (\n    <div>\n      <Dialog open={open}>\n\n        <div style={{margin: '20px'}}>\n\n          <Typography>Not connected to homecon</Typography>\n\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography>Connection settings</Typography>\n            </AccordionSummary>\n            <AccordionDetails>\n              <Typography>\n                <div style={{display: \"flex\", flexDirection: \"column\"}}>\n                  <TextField label=\"HomeCon Web Socket url\" value={wsUrl} onChange={(e) => setWsUrl(e.target.value)}/>\n                  <TextField label=\"Token\" type=\"password\" value={token} onChange={(e) => setToken(e.target.value)}/>\n                </div>\n                <div style={{marginTop: '10px'}}>\n                  <Button onClick={() => connect()}>re-connect</Button>\n                </div>\n              </Typography>\n            </AccordionDetails>\n          </Accordion>\n        </div>\n      </Dialog>\n    </div>\n  )\n}\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.homeconWebsocket = new HomeconWebsocket(this)\n\n    let wsUrl = window.localStorage.getItem('websocketUrl');\n    if(wsUrl === null){\n      wsUrl = 'ws://localhost:9099'\n    }\n    let token = window.localStorage.getItem('token');\n    if(token === null){\n      token = ''\n    }\n\n    this.state = {\n      wsUrl: wsUrl,\n      token: token,\n      ws: null,\n      states: null,\n      pages: null,\n      pagesData: {timestamp: 0, groups: []},\n    };\n  }\n\n  componentDidMount() {\n    this.homeconWebsocket.check();\n  }\n\n  setWsUrl(value) {\n    this.setState({wsUrl: value});\n    window.localStorage.setItem('websocketUrl', value);\n  }\n  setToken(value) {\n    this.setState({token: value});\n    window.localStorage.setItem('token', value);\n  }\n\n  render() {\n\n    return (\n      <ThemeProvider theme={darkTheme}>\n        <HomeconLayout pagesData={this.state.pagesData} states={this.state.states} ws={this.state.ws}/>\n        <ConnectionSettings wsUrl={this.state.wsUrl} setWsUrl={(val) => this.setWsUrl(val)} token={this.state.token} setToken={(val) => this.setToken(val)} connect={() => this.homeconWebsocket.check()} connected={this.state.ws !== null}/>\n      </ThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'fontsource-roboto';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}